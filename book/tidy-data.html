<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>10 타이디 데이터 | R for Data Science</title>
  <meta name="description" content="This book will teach you how to do data science with R: You’ll learn how to get your data into R, get it into the most useful structure, transform it, visualise it and model it. In this book, you will find a practicum of skills for data science. Just as a chemist learns how to clean test tubes and stock a lab, you’ll learn how to clean data and draw plots—and many other things besides. These are the skills that allow data science to happen, and here you will find the best practices for doing each of these things with R. You’ll learn how to use the grammar of graphics, literate programming, and reproducible research to save time. You’ll also learn how to manage cognitive resources to facilitate discoveries when wrangling, visualising, and exploring data.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="10 타이디 데이터 | R for Data Science />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="cover.png" />
  <meta property="og:description" content="This book will teach you how to do data science with R: You’ll learn how to get your data into R, get it into the most useful structure, transform it, visualise it and model it. In this book, you will find a practicum of skills for data science. Just as a chemist learns how to clean test tubes and stock a lab, you’ll learn how to clean data and draw plots—and many other things besides. These are the skills that allow data science to happen, and here you will find the best practices for doing each of these things with R. You’ll learn how to use the grammar of graphics, literate programming, and reproducible research to save time. You’ll also learn how to manage cognitive resources to facilitate discoveries when wrangling, visualising, and exploring data." />
  <meta name="github-repo" content="sulgik/r4ds" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="10 타이디 데이터 | R for Data Science />
  <meta name="twitter:site" content="@sulgik" />
  <meta name="twitter:description" content="This book will teach you how to do data science with R: You’ll learn how to get your data into R, get it into the most useful structure, transform it, visualise it and model it. In this book, you will find a practicum of skills for data science. Just as a chemist learns how to clean test tubes and stock a lab, you’ll learn how to clean data and draw plots—and many other things besides. These are the skills that allow data science to happen, and here you will find the best practices for doing each of these things with R. You’ll learn how to use the grammar of graphics, literate programming, and reproducible research to save time. You’ll also learn how to manage cognitive resources to facilitate discoveries when wrangling, visualising, and exploring data." />
  <meta name="twitter:image" content="cover.png" />

<meta name="author" content="Garrett Grolemund">
<meta name="author" content="Hadley Wickham">
<meta name="author" content="번역: Data Science 김설기">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="data-import.html">
<link rel="next" href="relational-data.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.3.1/str_view.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.2/leaflet.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="r4ds.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">R for Data Science</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>환영합니다</a></li>
<li class="chapter" data-level="1" data-path="section-1.html"><a href="section-1.html"><i class="fa fa-check"></i><b>1</b> 서문</a><ul>
<li class="chapter" data-level="1.1" data-path="section-1.html"><a href="section-1.html#--"><i class="fa fa-check"></i><b>1.1</b> 무엇을 배우게 될까</a></li>
<li class="chapter" data-level="1.2" data-path="section-1.html"><a href="section-1.html#--"><i class="fa fa-check"></i><b>1.2</b> 이 책의 구성</a></li>
<li class="chapter" data-level="1.3" data-path="section-1.html"><a href="section-1.html#--"><i class="fa fa-check"></i><b>1.3</b> 배우지 않는 것</a><ul>
<li class="chapter" data-level="1.3.1" data-path="section-1.html"><a href="section-1.html#section-1.3.1"><i class="fa fa-check"></i><b>1.3.1</b> 빅데이터</a></li>
<li class="chapter" data-level="1.3.2" data-path="section-1.html"><a href="section-1.html#python-julia"><i class="fa fa-check"></i><b>1.3.2</b> Python, Julia</a></li>
<li class="chapter" data-level="1.3.3" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>1.3.3</b> 비직사각형 데이터</a></li>
<li class="chapter" data-level="1.3.4" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>1.3.4</b> 가설 확인</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="section-1.html"><a href="section-1.html#section-1.4"><i class="fa fa-check"></i><b>1.4</b> 준비하기</a><ul>
<li class="chapter" data-level="1.4.1" data-path="section-1.html"><a href="section-1.html#r"><i class="fa fa-check"></i><b>1.4.1</b> R</a></li>
<li class="chapter" data-level="1.4.2" data-path="section-1.html"><a href="section-1.html#rstudio"><i class="fa fa-check"></i><b>1.4.2</b> RStudio</a></li>
<li class="chapter" data-level="1.4.3" data-path="section-1.html"><a href="section-1.html#tidyverse"><i class="fa fa-check"></i><b>1.4.3</b> Tidyverse</a></li>
<li class="chapter" data-level="1.4.4" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>1.4.4</b> 기타 패키지들</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="section-1.html"><a href="section-1.html#r--"><i class="fa fa-check"></i><b>1.5</b> R 코드 실행하기</a></li>
<li class="chapter" data-level="1.6" data-path="section-1.html"><a href="section-1.html#--"><i class="fa fa-check"></i><b>1.6</b> 도움받기, 더 배우기</a></li>
<li class="chapter" data-level="1.7" data-path="section-1.html"><a href="section-1.html#acknowledgements"><i class="fa fa-check"></i><b>1.7</b> Acknowledgements</a></li>
<li class="chapter" data-level="1.8" data-path="section-1.html"><a href="section-1.html#colophon"><i class="fa fa-check"></i><b>1.8</b> Colophon</a></li>
</ul></li>
<li class="part"><span><b>I 탐색하기</b></span></li>
<li class="chapter" data-level="2" data-path="explore-intro.html"><a href="explore-intro.html"><i class="fa fa-check"></i><b>2</b> 소개</a></li>
<li class="chapter" data-level="3" data-path="visualize.html"><a href="visualize.html"><i class="fa fa-check"></i><b>3</b> 데이터 시각화</a><ul>
<li class="chapter" data-level="3.1" data-path="visualize.html"><a href="visualize.html#section-3.1"><i class="fa fa-check"></i><b>3.1</b> 들어가기</a><ul>
<li class="chapter" data-level="3.1.1" data-path="visualize.html"><a href="visualize.html#-1"><i class="fa fa-check"></i><b>3.1.1</b> 준비하기</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>3.2</b> 첫 단계</a><ul>
<li class="chapter" data-level="3.2.1" data-path="visualize.html"><a href="visualize.html#mpg-"><i class="fa fa-check"></i><b>3.2.1</b> <code>mpg</code> 데이터프레임</a></li>
<li class="chapter" data-level="3.2.2" data-path="visualize.html"><a href="visualize.html#ggplot-"><i class="fa fa-check"></i><b>3.2.2</b> ggplot 생성하기</a></li>
<li class="chapter" data-level="3.2.3" data-path="section-1.html"><a href="section-1.html#--"><i class="fa fa-check"></i><b>3.2.3</b> 그래프 작성 탬플릿</a></li>
<li class="chapter" data-level="3.2.4" data-path="visualize.html"><a href="visualize.html#section-3.2.4"><i class="fa fa-check"></i><b>3.2.4</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="visualize.html"><a href="visualize.html#aesthetic-"><i class="fa fa-check"></i><b>3.3</b> Aesthetic 매핑</a><ul>
<li class="chapter" data-level="3.3.1" data-path="visualize.html"><a href="visualize.html#-1"><i class="fa fa-check"></i><b>3.3.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="visualize.html"><a href="visualize.html#common-problems"><i class="fa fa-check"></i><b>3.4</b> Common problems</a></li>
<li class="chapter" data-level="3.5" data-path="visualize.html"><a href="visualize.html#facet"><i class="fa fa-check"></i><b>3.5</b> Facet</a><ul>
<li class="chapter" data-level="3.5.1" data-path="visualize.html"><a href="visualize.html#-2"><i class="fa fa-check"></i><b>3.5.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>3.6</b> 기하 객체</a><ul>
<li class="chapter" data-level="3.6.1" data-path="visualize.html"><a href="visualize.html#-3"><i class="fa fa-check"></i><b>3.6.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>3.7</b> 통계적 변환</a><ul>
<li class="chapter" data-level="3.7.1" data-path="visualize.html"><a href="visualize.html#-4"><i class="fa fa-check"></i><b>3.7.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>3.8</b> 위치 조정</a><ul>
<li class="chapter" data-level="3.8.1" data-path="visualize.html"><a href="visualize.html#-5"><i class="fa fa-check"></i><b>3.8.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="visualize.html"><a href="visualize.html#section-3.9"><i class="fa fa-check"></i><b>3.9</b> 좌표계</a><ul>
<li class="chapter" data-level="3.9.1" data-path="visualize.html"><a href="visualize.html#-6"><i class="fa fa-check"></i><b>3.9.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="3.10" data-path="section-1.html"><a href="section-1.html#--"><i class="fa fa-check"></i><b>3.10</b> 그래프 레이어 문법</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="workflow-basics.html"><a href="workflow-basics.html"><i class="fa fa-check"></i><b>4</b> 워크플로: 기초</a><ul>
<li class="chapter" data-level="4.1" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>4.1</b> 코딩 기초</a></li>
<li class="chapter" data-level="4.2" data-path="section-1.html"><a href="section-1.html#--"><i class="fa fa-check"></i><b>4.2</b> 이름에 들어갈 것</a></li>
<li class="chapter" data-level="4.3" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>4.3</b> 함수 호출하기</a></li>
<li class="chapter" data-level="4.4" data-path="workflow-basics.html"><a href="workflow-basics.html#-7"><i class="fa fa-check"></i><b>4.4</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="transform.html"><a href="transform.html"><i class="fa fa-check"></i><b>5</b> 데이터 변형</a><ul>
<li class="chapter" data-level="5.1" data-path="visualize.html"><a href="visualize.html#-1"><i class="fa fa-check"></i><b>5.1</b> 들어가기</a><ul>
<li class="chapter" data-level="5.1.1" data-path="visualize.html"><a href="visualize.html#-2"><i class="fa fa-check"></i><b>5.1.1</b> 준비하기</a></li>
<li class="chapter" data-level="5.1.2" data-path="transform.html"><a href="transform.html#nycflights13"><i class="fa fa-check"></i><b>5.1.2</b> nycflights13</a></li>
<li class="chapter" data-level="5.1.3" data-path="transform.html"><a href="transform.html#dplyr-"><i class="fa fa-check"></i><b>5.1.3</b> dplyr 기초</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="transform.html"><a href="transform.html#filter--"><i class="fa fa-check"></i><b>5.2</b> <code>filter()</code> 로 필터링하기</a><ul>
<li class="chapter" data-level="5.2.1" data-path="transform.html"><a href="transform.html#section-5.2.1"><i class="fa fa-check"></i><b>5.2.1</b> 비교</a></li>
<li class="chapter" data-level="5.2.2" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>5.2.2</b> 논리 연산자</a></li>
<li class="chapter" data-level="5.2.3" data-path="transform.html"><a href="transform.html#section-5.2.3"><i class="fa fa-check"></i><b>5.2.3</b> 결측값</a></li>
<li class="chapter" data-level="5.2.4" data-path="transform.html"><a href="transform.html#-8"><i class="fa fa-check"></i><b>5.2.4</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="transform.html"><a href="transform.html#arrange--"><i class="fa fa-check"></i><b>5.3</b> <code>arrange()</code> 로 정렬하기</a><ul>
<li class="chapter" data-level="5.3.1" data-path="transform.html"><a href="transform.html#-9"><i class="fa fa-check"></i><b>5.3.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="transform.html"><a href="transform.html#select"><i class="fa fa-check"></i><b>5.4</b> <code>select()</code> 로 열 선택하기</a><ul>
<li class="chapter" data-level="5.4.1" data-path="transform.html"><a href="transform.html#-10"><i class="fa fa-check"></i><b>5.4.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="transform.html"><a href="transform.html#mutate----"><i class="fa fa-check"></i><b>5.5</b> <code>mutate()</code> 로 새로운 변수 추가하기</a><ul>
<li class="chapter" data-level="5.5.1" data-path="transform.html"><a href="transform.html#mutate-funs"><i class="fa fa-check"></i><b>5.5.1</b> 유용한 생성 함수</a></li>
<li class="chapter" data-level="5.5.2" data-path="transform.html"><a href="transform.html#-11"><i class="fa fa-check"></i><b>5.5.2</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="transform.html"><a href="transform.html#summarize---"><i class="fa fa-check"></i><b>5.6</b> <code>summarize()</code> 로 그룹화 요약하기</a><ul>
<li class="chapter" data-level="5.6.1" data-path="transform.html"><a href="transform.html#---"><i class="fa fa-check"></i><b>5.6.1</b> 파이프로 여러 작업 조합하기</a></li>
<li class="chapter" data-level="5.6.2" data-path="visualize.html"><a href="visualize.html#-1"><i class="fa fa-check"></i><b>5.6.2</b> 결측값</a></li>
<li class="chapter" data-level="5.6.3" data-path="transform.html"><a href="transform.html#section-5.6.3"><i class="fa fa-check"></i><b>5.6.3</b> 카운트</a></li>
<li class="chapter" data-level="5.6.4" data-path="transform.html"><a href="transform.html#summarize-funs"><i class="fa fa-check"></i><b>5.6.4</b> 유용한 요약 함수</a></li>
<li class="chapter" data-level="5.6.5" data-path="section-1.html"><a href="section-1.html#--"><i class="fa fa-check"></i><b>5.6.5</b> 다중 변수로 그룹화</a></li>
<li class="chapter" data-level="5.6.6" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>5.6.6</b> 그룹화 해제</a></li>
<li class="chapter" data-level="5.6.7" data-path="transform.html"><a href="transform.html#-12"><i class="fa fa-check"></i><b>5.6.7</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="section-1.html"><a href="section-1.html#--"><i class="fa fa-check"></i><b>5.7</b> 그룹화 뮤테이트(와 필터링)</a><ul>
<li class="chapter" data-level="5.7.1" data-path="transform.html"><a href="transform.html#-13"><i class="fa fa-check"></i><b>5.7.1</b> 연습문제</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="workflow-scripts.html"><a href="workflow-scripts.html"><i class="fa fa-check"></i><b>6</b> 워크플로: 스크립트</a><ul>
<li class="chapter" data-level="6.1" data-path="workflow-scripts.html"><a href="workflow-scripts.html#running-code"><i class="fa fa-check"></i><b>6.1</b> Running code</a></li>
<li class="chapter" data-level="6.2" data-path="workflow-scripts.html"><a href="workflow-scripts.html#rstudio-diagnostics"><i class="fa fa-check"></i><b>6.2</b> RStudio diagnostics</a></li>
<li class="chapter" data-level="6.3" data-path="workflow-scripts.html"><a href="workflow-scripts.html#practice"><i class="fa fa-check"></i><b>6.3</b> Practice</a></li>
</ul></li>
<li class="part"><span><b>II 데이터 길들이기</b></span></li>
<li class="chapter" data-level="7" data-path="wrangle-intro.html"><a href="wrangle-intro.html"><i class="fa fa-check"></i><b>7</b> 소개</a></li>
<li class="chapter" data-level="8" data-path="tibble.html"><a href="tibble.html"><i class="fa fa-check"></i><b>8</b> 티블</a><ul>
<li class="chapter" data-level="8.1" data-path="visualize.html"><a href="visualize.html#-2"><i class="fa fa-check"></i><b>8.1</b> 들어가기</a><ul>
<li class="chapter" data-level="8.1.1" data-path="visualize.html"><a href="visualize.html#-3"><i class="fa fa-check"></i><b>8.1.1</b> 준비하기</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="tibble.html"><a href="tibble.html#tibbles"><i class="fa fa-check"></i><b>8.2</b> tibble 생성하기</a></li>
<li class="chapter" data-level="8.3" data-path="tibble.html"><a href="tibble.html#tibble-vs.data.frame"><i class="fa fa-check"></i><b>8.3</b> Tibble vs. data.frame</a><ul>
<li class="chapter" data-level="8.3.1" data-path="tibble.html"><a href="tibble.html#section-8.3.1"><i class="fa fa-check"></i><b>8.3.1</b> 화면출력</a></li>
<li class="chapter" data-level="8.3.2" data-path="tibble.html"><a href="tibble.html#section-8.3.2"><i class="fa fa-check"></i><b>8.3.2</b> 서브셋하기</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="section-1.html"><a href="section-1.html#--"><i class="fa fa-check"></i><b>8.4</b> 이전 코드와 상호작용</a></li>
<li class="chapter" data-level="8.5" data-path="tibble.html"><a href="tibble.html#-14"><i class="fa fa-check"></i><b>8.5</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="data-import.html"><a href="data-import.html"><i class="fa fa-check"></i><b>9</b> 데이터 불러오기</a><ul>
<li class="chapter" data-level="9.1" data-path="visualize.html"><a href="visualize.html#-3"><i class="fa fa-check"></i><b>9.1</b> 들어가기</a><ul>
<li class="chapter" data-level="9.1.1" data-path="visualize.html"><a href="visualize.html#-4"><i class="fa fa-check"></i><b>9.1.1</b> 준비하기</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="data-import.html"><a href="data-import.html#section-9.2"><i class="fa fa-check"></i><b>9.2</b> 시작하기</a><ul>
<li class="chapter" data-level="9.2.1" data-path="data-import.html"><a href="data-import.html#-r-"><i class="fa fa-check"></i><b>9.2.1</b> 베이스 R과 비교</a></li>
<li class="chapter" data-level="9.2.2" data-path="data-import.html"><a href="data-import.html#-15"><i class="fa fa-check"></i><b>9.2.2</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>9.3</b> 벡터 파싱하기</a><ul>
<li class="chapter" data-level="9.3.1" data-path="data-import.html"><a href="data-import.html#section-9.3.1"><i class="fa fa-check"></i><b>9.3.1</b> 숫자</a></li>
<li class="chapter" data-level="9.3.2" data-path="data-import.html"><a href="data-import.html#readr-strings"><i class="fa fa-check"></i><b>9.3.2</b> 문자열</a></li>
<li class="chapter" data-level="9.3.3" data-path="data-import.html"><a href="data-import.html#readr-factors"><i class="fa fa-check"></i><b>9.3.3</b> 팩터형</a></li>
<li class="chapter" data-level="9.3.4" data-path="data-import.html"><a href="data-import.html#readr-datetimes"><i class="fa fa-check"></i><b>9.3.4</b> Dates, date-times, times</a></li>
<li class="chapter" data-level="9.3.5" data-path="data-import.html"><a href="data-import.html#-16"><i class="fa fa-check"></i><b>9.3.5</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>9.4</b> 파일 파싱하기</a><ul>
<li class="chapter" data-level="9.4.1" data-path="data-import.html"><a href="data-import.html#section-9.4.1"><i class="fa fa-check"></i><b>9.4.1</b> 전략</a></li>
<li class="chapter" data-level="9.4.2" data-path="data-import.html"><a href="data-import.html#section-9.4.2"><i class="fa fa-check"></i><b>9.4.2</b> 문제점</a></li>
<li class="chapter" data-level="9.4.3" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>9.4.3</b> 기타 전략</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>9.5</b> 파일에 쓰기</a></li>
<li class="chapter" data-level="9.6" data-path="section-1.html"><a href="section-1.html#--"><i class="fa fa-check"></i><b>9.6</b> 기타 데이터 유형</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="tidy-data.html"><a href="tidy-data.html"><i class="fa fa-check"></i><b>10</b> 타이디 데이터</a><ul>
<li class="chapter" data-level="10.1" data-path="visualize.html"><a href="visualize.html#-4"><i class="fa fa-check"></i><b>10.1</b> 들어가기</a><ul>
<li class="chapter" data-level="10.1.1" data-path="visualize.html"><a href="visualize.html#-5"><i class="fa fa-check"></i><b>10.1.1</b> 준비하기</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="tidy-data.html"><a href="tidy-data.html#tidy-data"><i class="fa fa-check"></i><b>10.2</b> Tidy Data</a><ul>
<li class="chapter" data-level="10.2.1" data-path="tidy-data.html"><a href="tidy-data.html#-17"><i class="fa fa-check"></i><b>10.2.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="tidy-data.html"><a href="tidy-data.html#gather--spread"><i class="fa fa-check"></i><b>10.3</b> gather 와 spread</a><ul>
<li class="chapter" data-level="10.3.1" data-path="tidy-data.html"><a href="tidy-data.html#gather"><i class="fa fa-check"></i><b>10.3.1</b> Gather</a></li>
<li class="chapter" data-level="10.3.2" data-path="tidy-data.html"><a href="tidy-data.html#spread"><i class="fa fa-check"></i><b>10.3.2</b> Spread</a></li>
<li class="chapter" data-level="10.3.3" data-path="tidy-data.html"><a href="tidy-data.html#-18"><i class="fa fa-check"></i><b>10.3.3</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="tidy-data.html"><a href="tidy-data.html#separate--unite"><i class="fa fa-check"></i><b>10.4</b> separate 과 unite</a><ul>
<li class="chapter" data-level="10.4.1" data-path="tidy-data.html"><a href="tidy-data.html#separate"><i class="fa fa-check"></i><b>10.4.1</b> separate</a></li>
<li class="chapter" data-level="10.4.2" data-path="tidy-data.html"><a href="tidy-data.html#unite"><i class="fa fa-check"></i><b>10.4.2</b> unite</a></li>
<li class="chapter" data-level="10.4.3" data-path="tidy-data.html"><a href="tidy-data.html#-19"><i class="fa fa-check"></i><b>10.4.3</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="visualize.html"><a href="visualize.html#-2"><i class="fa fa-check"></i><b>10.5</b> 결측값</a><ul>
<li class="chapter" data-level="10.5.1" data-path="tidy-data.html"><a href="tidy-data.html#-20"><i class="fa fa-check"></i><b>10.5.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>10.6</b> 사례 연구</a><ul>
<li class="chapter" data-level="10.6.1" data-path="tidy-data.html"><a href="tidy-data.html#-21"><i class="fa fa-check"></i><b>10.6.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="section-1.html"><a href="section-1.html#--"><i class="fa fa-check"></i><b>10.7</b> 타이디하지 않은 데이터</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="relational-data.html"><a href="relational-data.html"><i class="fa fa-check"></i><b>11</b> 관계형 데이터</a><ul>
<li class="chapter" data-level="11.1" data-path="visualize.html"><a href="visualize.html#-5"><i class="fa fa-check"></i><b>11.1</b> 들어가기</a><ul>
<li class="chapter" data-level="11.1.1" data-path="visualize.html"><a href="visualize.html#-6"><i class="fa fa-check"></i><b>11.1.1</b> 준비하기</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="relational-data.html"><a href="relational-data.html#nycflights13-relational"><i class="fa fa-check"></i><b>11.2</b> nycflights13</a><ul>
<li class="chapter" data-level="11.2.1" data-path="relational-data.html"><a href="relational-data.html#-22"><i class="fa fa-check"></i><b>11.2.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="relational-data.html"><a href="relational-data.html#section-11.3"><i class="fa fa-check"></i><b>11.3</b> 키</a><ul>
<li class="chapter" data-level="11.3.1" data-path="relational-data.html"><a href="relational-data.html#-23"><i class="fa fa-check"></i><b>11.3.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="relational-data.html"><a href="relational-data.html#mutating-joins"><i class="fa fa-check"></i><b>11.4</b> 뮤테이팅 조인</a><ul>
<li class="chapter" data-level="11.4.1" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>11.4.1</b> 조인 이해하기</a></li>
<li class="chapter" data-level="11.4.2" data-path="relational-data.html"><a href="relational-data.html#inner-join"><i class="fa fa-check"></i><b>11.4.2</b> 내부 조인</a></li>
<li class="chapter" data-level="11.4.3" data-path="relational-data.html"><a href="relational-data.html#outer-join"><i class="fa fa-check"></i><b>11.4.3</b> 외부 조인</a></li>
<li class="chapter" data-level="11.4.4" data-path="relational-data.html"><a href="relational-data.html#join-matches"><i class="fa fa-check"></i><b>11.4.4</b> 중복키</a></li>
<li class="chapter" data-level="11.4.5" data-path="relational-data.html"><a href="relational-data.html#join-by"><i class="fa fa-check"></i><b>11.4.5</b> 키열 정의하기</a></li>
<li class="chapter" data-level="11.4.6" data-path="relational-data.html"><a href="relational-data.html#-24"><i class="fa fa-check"></i><b>11.4.6</b> 연습문제</a></li>
<li class="chapter" data-level="11.4.7" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>11.4.7</b> 기타 구현</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="relational-data.html"><a href="relational-data.html#filtering-joins"><i class="fa fa-check"></i><b>11.5</b> 필터링 조인</a><ul>
<li class="chapter" data-level="11.5.1" data-path="relational-data.html"><a href="relational-data.html#-25"><i class="fa fa-check"></i><b>11.5.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>11.6</b> 조인 문제</a></li>
<li class="chapter" data-level="11.7" data-path="relational-data.html"><a href="relational-data.html#set-operations"><i class="fa fa-check"></i><b>11.7</b> 집합 연산</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="strings.html"><a href="strings.html"><i class="fa fa-check"></i><b>12</b> 문자열</a><ul>
<li class="chapter" data-level="12.1" data-path="visualize.html"><a href="visualize.html#-6"><i class="fa fa-check"></i><b>12.1</b> 들어가기</a><ul>
<li class="chapter" data-level="12.1.1" data-path="workflow-basics.html"><a href="workflow-basics.html#-7"><i class="fa fa-check"></i><b>12.1.1</b> 준비하기</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>12.2</b> 문자열 기초</a><ul>
<li class="chapter" data-level="12.2.1" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>12.2.1</b> 문자열 길이</a></li>
<li class="chapter" data-level="12.2.2" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>12.2.2</b> 문자열 결합</a></li>
<li class="chapter" data-level="12.2.3" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>12.2.3</b> 문자열 서브셋하기</a></li>
<li class="chapter" data-level="12.2.4" data-path="strings.html"><a href="strings.html#section-12.2.4"><i class="fa fa-check"></i><b>12.2.4</b> 로캘</a></li>
<li class="chapter" data-level="12.2.5" data-path="strings.html"><a href="strings.html#-26"><i class="fa fa-check"></i><b>12.2.5</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="transform.html"><a href="transform.html#---"><i class="fa fa-check"></i><b>12.3</b> 정규표현식을 이용한 패턴 매칭</a><ul>
<li class="chapter" data-level="12.3.1" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>12.3.1</b> 기초 매칭</a></li>
<li class="chapter" data-level="12.3.2" data-path="strings.html"><a href="strings.html#section-12.3.2"><i class="fa fa-check"></i><b>12.3.2</b> 앵커</a></li>
<li class="chapter" data-level="12.3.3" data-path="section-1.html"><a href="section-1.html#--"><i class="fa fa-check"></i><b>12.3.3</b> 문자 클래스와 대체구문</a></li>
<li class="chapter" data-level="12.3.4" data-path="strings.html"><a href="strings.html#section-12.3.4"><i class="fa fa-check"></i><b>12.3.4</b> 반복</a></li>
<li class="chapter" data-level="12.3.5" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>12.3.5</b> 그룹화와 역참조</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="strings.html"><a href="strings.html#section-12.4"><i class="fa fa-check"></i><b>12.4</b> 도구</a><ul>
<li class="chapter" data-level="12.4.1" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>12.4.1</b> 매칭 탐지</a></li>
<li class="chapter" data-level="12.4.2" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>12.4.2</b> 매칭 추출</a></li>
<li class="chapter" data-level="12.4.3" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>12.4.3</b> 그룹화 매칭</a></li>
<li class="chapter" data-level="12.4.4" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>12.4.4</b> 매칭 치환</a></li>
<li class="chapter" data-level="12.4.5" data-path="strings.html"><a href="strings.html#splitting"><i class="fa fa-check"></i><b>12.4.5</b> Splitting</a></li>
<li class="chapter" data-level="12.4.6" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>12.4.6</b> 매치 찾기</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="section-1.html"><a href="section-1.html#--"><i class="fa fa-check"></i><b>12.5</b> 기타 패턴 유형</a><ul>
<li class="chapter" data-level="12.5.1" data-path="strings.html"><a href="strings.html#-37"><i class="fa fa-check"></i><b>12.5.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="section-1.html"><a href="section-1.html#--"><i class="fa fa-check"></i><b>12.6</b> 정규표현식의 기타 용도</a></li>
<li class="chapter" data-level="12.7" data-path="strings.html"><a href="strings.html#stringi"><i class="fa fa-check"></i><b>12.7</b> stringi</a><ul>
<li class="chapter" data-level="12.7.1" data-path="strings.html"><a href="strings.html#-38"><i class="fa fa-check"></i><b>12.7.1</b> 연습문제</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="factors.html"><a href="factors.html"><i class="fa fa-check"></i><b>13</b> 팩터형</a><ul>
<li class="chapter" data-level="13.1" data-path="workflow-basics.html"><a href="workflow-basics.html#-7"><i class="fa fa-check"></i><b>13.1</b> 들어가기</a><ul>
<li class="chapter" data-level="13.1.1" data-path="transform.html"><a href="transform.html#-8"><i class="fa fa-check"></i><b>13.1.1</b> 준비하기</a></li>
<li class="chapter" data-level="13.1.2" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>13.1.2</b> 더 배우기</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>13.2</b> 팩터형 생성하기</a></li>
<li class="chapter" data-level="13.3" data-path="factors.html"><a href="factors.html#general-social-survey"><i class="fa fa-check"></i><b>13.3</b> General Social Survey</a><ul>
<li class="chapter" data-level="13.3.1" data-path="factors.html"><a href="factors.html#-39"><i class="fa fa-check"></i><b>13.3.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="section-1.html"><a href="section-1.html#--"><i class="fa fa-check"></i><b>13.4</b> 팩터 순서 수정하기</a><ul>
<li class="chapter" data-level="13.4.1" data-path="factors.html"><a href="factors.html#-40"><i class="fa fa-check"></i><b>13.4.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="section-1.html"><a href="section-1.html#--"><i class="fa fa-check"></i><b>13.5</b> 팩터 레벨 수정하기</a><ul>
<li class="chapter" data-level="13.5.1" data-path="factors.html"><a href="factors.html#-41"><i class="fa fa-check"></i><b>13.5.1</b> 연습문제</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="dates-and-times.html"><a href="dates-and-times.html"><i class="fa fa-check"></i><b>14</b> 날짜와 시간</a><ul>
<li class="chapter" data-level="14.1" data-path="transform.html"><a href="transform.html#-8"><i class="fa fa-check"></i><b>14.1</b> 들어가기</a><ul>
<li class="chapter" data-level="14.1.1" data-path="transform.html"><a href="transform.html#-9"><i class="fa fa-check"></i><b>14.1.1</b> 준비하기</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>14.2</b> 날짜/시간 생성하기</a><ul>
<li class="chapter" data-level="14.2.1" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>14.2.1</b> 문자열에서 생성</a></li>
<li class="chapter" data-level="14.2.2" data-path="section-1.html"><a href="section-1.html#--"><i class="fa fa-check"></i><b>14.2.2</b> 개별 구성요소에서 생성</a></li>
<li class="chapter" data-level="14.2.3" data-path="section-1.html"><a href="section-1.html#--"><i class="fa fa-check"></i><b>14.2.3</b> 기타 유형에서 생성</a></li>
<li class="chapter" data-level="14.2.4" data-path="dates-and-times.html"><a href="dates-and-times.html#-42"><i class="fa fa-check"></i><b>14.2.4</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="section-1.html"><a href="section-1.html#--"><i class="fa fa-check"></i><b>14.3</b> 데이트-타임형 구성요소</a><ul>
<li class="chapter" data-level="14.3.1" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>14.3.1</b> 구성요소 가져오기</a></li>
<li class="chapter" data-level="14.3.2" data-path="dates-and-times.html"><a href="dates-and-times.html#section-14.3.2"><i class="fa fa-check"></i><b>14.3.2</b> 반올림</a></li>
<li class="chapter" data-level="14.3.3" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>14.3.3</b> 구성요소 설정</a></li>
<li class="chapter" data-level="14.3.4" data-path="dates-and-times.html"><a href="dates-and-times.html#-43"><i class="fa fa-check"></i><b>14.3.4</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>14.4</b> 시간 범위</a><ul>
<li class="chapter" data-level="14.4.1" data-path="dates-and-times.html"><a href="dates-and-times.html#section-14.4.1"><i class="fa fa-check"></i><b>14.4.1</b> 듀레이션형</a></li>
<li class="chapter" data-level="14.4.2" data-path="dates-and-times.html"><a href="dates-and-times.html#section-14.4.2"><i class="fa fa-check"></i><b>14.4.2</b> 피리어드형</a></li>
<li class="chapter" data-level="14.4.3" data-path="dates-and-times.html"><a href="dates-and-times.html#section-14.4.3"><i class="fa fa-check"></i><b>14.4.3</b> 인터벌형</a></li>
<li class="chapter" data-level="14.4.4" data-path="dates-and-times.html"><a href="dates-and-times.html#section-14.4.4"><i class="fa fa-check"></i><b>14.4.4</b> 요약</a></li>
<li class="chapter" data-level="14.4.5" data-path="dates-and-times.html"><a href="dates-and-times.html#-44"><i class="fa fa-check"></i><b>14.4.5</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="dates-and-times.html"><a href="dates-and-times.html#section-14.5"><i class="fa fa-check"></i><b>14.5</b> 시간대</a></li>
</ul></li>
<li class="part"><span><b>III 프로그래밍</b></span></li>
<li class="chapter" data-level="15" data-path="program-intro.html"><a href="program-intro.html"><i class="fa fa-check"></i><b>15</b> 소개</a><ul>
<li class="chapter" data-level="15.1" data-path="program-intro.html"><a href="program-intro.html#learning-more"><i class="fa fa-check"></i><b>15.1</b> Learning more</a></li>
</ul></li>
<li class="part"><span><b>IV 모델</b></span></li>
<li class="chapter" data-level="16" data-path="model-intro.html"><a href="model-intro.html"><i class="fa fa-check"></i><b>16</b> 소개</a><ul>
<li class="chapter" data-level="16.1" data-path="model-intro.html"><a href="model-intro.html#hypothesis-generation-vs.hypothesis-confirmation"><i class="fa fa-check"></i><b>16.1</b> Hypothesis generation vs. hypothesis confirmation</a></li>
</ul></li>
<li class="part"><span><b>V 의사소통하기</b></span></li>
<li class="chapter" data-level="17" data-path="communicate-intro.html"><a href="communicate-intro.html"><i class="fa fa-check"></i><b>17</b> 소개</a></li>
<li class="chapter" data-level="18" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>18</b> R 마크다운</a><ul>
<li class="chapter" data-level="18.1" data-path="transform.html"><a href="transform.html#-9"><i class="fa fa-check"></i><b>18.1</b> 들어가기</a><ul>
<li class="chapter" data-level="18.1.1" data-path="transform.html"><a href="transform.html#-10"><i class="fa fa-check"></i><b>18.1.1</b> 준비하기</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="section-1.html"><a href="section-1.html#r--"><i class="fa fa-check"></i><b>18.2</b> R 마크다운 기초</a><ul>
<li class="chapter" data-level="18.2.1" data-path="rmarkdown.html"><a href="rmarkdown.html#-45"><i class="fa fa-check"></i><b>18.2.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="transform.html"><a href="transform.html#---"><i class="fa fa-check"></i><b>18.3</b> 마크다운으로 텍스트 서식 지정하기</a><ul>
<li class="chapter" data-level="18.3.1" data-path="rmarkdown.html"><a href="rmarkdown.html#-46"><i class="fa fa-check"></i><b>18.3.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>18.4</b> 코드 청크</a><ul>
<li class="chapter" data-level="18.4.1" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>18.4.1</b> 청크 이름</a></li>
<li class="chapter" data-level="18.4.2" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>18.4.2</b> 청크 옵션</a></li>
<li class="chapter" data-level="18.4.3" data-path="rmarkdown.html"><a href="rmarkdown.html#section-18.4.3"><i class="fa fa-check"></i><b>18.4.3</b> 표</a></li>
<li class="chapter" data-level="18.4.4" data-path="rmarkdown.html"><a href="rmarkdown.html#section-18.4.4"><i class="fa fa-check"></i><b>18.4.4</b> 캐싱</a></li>
<li class="chapter" data-level="18.4.5" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>18.4.5</b> 전역 옵션</a></li>
<li class="chapter" data-level="18.4.6" data-path="rmarkdown.html"><a href="rmarkdown.html#inline-code"><i class="fa fa-check"></i><b>18.4.6</b> Inline code</a></li>
<li class="chapter" data-level="18.4.7" data-path="rmarkdown.html"><a href="rmarkdown.html#exercises"><i class="fa fa-check"></i><b>18.4.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="18.5" data-path="rmarkdown.html"><a href="rmarkdown.html#troubleshooting"><i class="fa fa-check"></i><b>18.5</b> Troubleshooting</a></li>
<li class="chapter" data-level="18.6" data-path="rmarkdown.html"><a href="rmarkdown.html#yaml-header"><i class="fa fa-check"></i><b>18.6</b> YAML header</a><ul>
<li class="chapter" data-level="18.6.1" data-path="rmarkdown.html"><a href="rmarkdown.html#parameters"><i class="fa fa-check"></i><b>18.6.1</b> Parameters</a></li>
<li class="chapter" data-level="18.6.2" data-path="rmarkdown.html"><a href="rmarkdown.html#bibliographies-and-citations"><i class="fa fa-check"></i><b>18.6.2</b> Bibliographies and Citations</a></li>
</ul></li>
<li class="chapter" data-level="18.7" data-path="rmarkdown.html"><a href="rmarkdown.html#learning-more-1"><i class="fa fa-check"></i><b>18.7</b> Learning more</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html"><i class="fa fa-check"></i><b>19</b> 그래프를 통한 의사소통</a><ul>
<li class="chapter" data-level="19.1" data-path="transform.html"><a href="transform.html#-10"><i class="fa fa-check"></i><b>19.1</b> 들어가기</a><ul>
<li class="chapter" data-level="19.1.1" data-path="transform.html"><a href="transform.html#-11"><i class="fa fa-check"></i><b>19.1.1</b> 준비하기</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#label"><i class="fa fa-check"></i><b>19.2</b> Label</a><ul>
<li class="chapter" data-level="19.2.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercises-1"><i class="fa fa-check"></i><b>19.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#annotations"><i class="fa fa-check"></i><b>19.3</b> Annotations</a><ul>
<li class="chapter" data-level="19.3.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercises-2"><i class="fa fa-check"></i><b>19.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#scales"><i class="fa fa-check"></i><b>19.4</b> Scales</a><ul>
<li class="chapter" data-level="19.4.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#axis-ticks-and-legend-keys"><i class="fa fa-check"></i><b>19.4.1</b> Axis ticks and legend keys</a></li>
<li class="chapter" data-level="19.4.2" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#legend-layout"><i class="fa fa-check"></i><b>19.4.2</b> Legend layout</a></li>
<li class="chapter" data-level="19.4.3" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#replacing-a-scale"><i class="fa fa-check"></i><b>19.4.3</b> Replacing a scale</a></li>
<li class="chapter" data-level="19.4.4" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercises-3"><i class="fa fa-check"></i><b>19.4.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="19.5" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#zooming"><i class="fa fa-check"></i><b>19.5</b> Zooming</a></li>
<li class="chapter" data-level="19.6" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#themes"><i class="fa fa-check"></i><b>19.6</b> Themes</a></li>
<li class="chapter" data-level="19.7" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#saving-your-plots"><i class="fa fa-check"></i><b>19.7</b> Saving your plots</a><ul>
<li class="chapter" data-level="19.7.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#figure-sizing"><i class="fa fa-check"></i><b>19.7.1</b> Figure sizing</a></li>
<li class="chapter" data-level="19.7.2" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#other-important-options"><i class="fa fa-check"></i><b>19.7.2</b> Other important options</a></li>
</ul></li>
<li class="chapter" data-level="19.8" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#learning-more-2"><i class="fa fa-check"></i><b>19.8</b> Learning more</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="rmarkdown-formats.html"><a href="rmarkdown-formats.html"><i class="fa fa-check"></i><b>20</b> R 마크다운 유형</a><ul>
<li class="chapter" data-level="20.1" data-path="transform.html"><a href="transform.html#-11"><i class="fa fa-check"></i><b>20.1</b> 들어가기</a></li>
<li class="chapter" data-level="20.2" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>20.2</b> 출력 옵션</a></li>
<li class="chapter" data-level="20.3" data-path="rmarkdown-formats.html"><a href="rmarkdown-formats.html#document"><i class="fa fa-check"></i><b>20.3</b> Document</a></li>
<li class="chapter" data-level="20.4" data-path="rmarkdown-formats.html"><a href="rmarkdown-formats.html#notebook"><i class="fa fa-check"></i><b>20.4</b> Notebook</a></li>
<li class="chapter" data-level="20.5" data-path="rmarkdown-formats.html"><a href="rmarkdown-formats.html#presentation"><i class="fa fa-check"></i><b>20.5</b> Presentation</a></li>
<li class="chapter" data-level="20.6" data-path="rmarkdown-formats.html"><a href="rmarkdown-formats.html#dashboard"><i class="fa fa-check"></i><b>20.6</b> Dashboard</a></li>
<li class="chapter" data-level="20.7" data-path="section-1.html"><a href="section-1.html#-"><i class="fa fa-check"></i><b>20.7</b> 대화형 동작</a><ul>
<li class="chapter" data-level="20.7.1" data-path="rmarkdown-formats.html"><a href="rmarkdown-formats.html#htmlwidgets"><i class="fa fa-check"></i><b>20.7.1</b> htmlwidgets</a></li>
<li class="chapter" data-level="20.7.2" data-path="rmarkdown-formats.html"><a href="rmarkdown-formats.html#shiny"><i class="fa fa-check"></i><b>20.7.2</b> Shiny</a></li>
</ul></li>
<li class="chapter" data-level="20.8" data-path="rmarkdown-formats.html"><a href="rmarkdown-formats.html#website"><i class="fa fa-check"></i><b>20.8</b> Website</a></li>
<li class="chapter" data-level="20.9" data-path="rmarkdown-formats.html"><a href="rmarkdown-formats.html#other-formats"><i class="fa fa-check"></i><b>20.9</b> Other formats</a></li>
<li class="chapter" data-level="20.10" data-path="rmarkdown-formats.html"><a href="rmarkdown-formats.html#--1"><i class="fa fa-check"></i><b>20.10</b> 더 배우기</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="rmarkdown-workflow.html"><a href="rmarkdown-workflow.html"><i class="fa fa-check"></i><b>21</b> R 마크다운 워크플로</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tidy-data" class="section level1">
<h1><span class="header-section-number">10</span> 타이디 데이터</h1>
<div id="-4" class="section level2">
<h2><span class="header-section-number">10.1</span> 들어가기</h2>
<blockquote>
<p>행복한 가정은 모두 비슷하다. 모든 불행한 가족은 자기 멋대로 불행하다. — 레프 톨스토이 (Leo Tolstoy)</p>
</blockquote>
<blockquote>
<p>“깔끔한 데이터셋은 모두 비슷하지만 모든 엉망인 데이터셋은 자기 멋대로 엉망이다. — 해들리 위컴</p>
</blockquote>
<p>이 장에서는 R에서 데이터를 일관성 있게 정리하는 법을 학습한다. 이는 타이디(tidy, 깔끔한) 데이터라는 구조이다. 타이디 데이터 형식으로 만들기 위해서는 일부 선행되는 작업이 필요하지만, 장기적으로 이러한 작업이 큰 도움이 된다. tidyverse의 패키지들에 있는 타이디 데이터와 도구를 사용하면 데이터를 기존 표현법에서 다른 표현법으로 훨씬 짧은 시간 안에 처리할 수 있고, 따라서 분석 문제를 다루는 일에 더 많은 시간을 쓸 수 있게 된다.</p>
<p>이 장에서는 타이디 데이터에 대해 실무적으로 소개하고, <strong>tidyr</strong> 패키지에 포함된 도구를 살펴본다. 기본 이론에 대해 더 자세히 알고 싶다면 Journal of Statistical Software 에 실린 <a href="http://www.jstatsoft.org/v59/i10/paper">Tidy Data 논문</a>을 읽어라.</p>
<div id="-5" class="section level3">
<h3><span class="header-section-number">10.1.1</span> 준비하기</h3>
<p>이 장에서는 지저분한 데이터셋을 정리하는 도구가 있는 <strong>tidyr</strong> 패키지에 중점을 둘 것이다. <strong>tidyr</strong> 은 tidyverse 의 핵심 구성원이다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)</code></pre></div>
</div>
</div>
<div id="tidy-data" class="section level2">
<h2><span class="header-section-number">10.2</span> Tidy Data</h2>
<p>하나의 기본 데이터를 표현하는 방식은 다양하다. 다음 예는 같은 데이터를 다른 네 가지 방식으로 구성하여 보여준다. 각 데이터셋은 country(국가), year(연도), population(인구) 및 cases(사례), 네 개의 변수 값을 동일하게 보여주지만 다른 방식으로 구성한다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">table1
<span class="co">#&gt; # A tibble: 6 x 4</span>
<span class="co">#&gt;   country      year  cases population</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;int&gt;  &lt;int&gt;      &lt;int&gt;</span>
<span class="co">#&gt; 1 Afghanistan  1999    745   19987071</span>
<span class="co">#&gt; 2 Afghanistan  2000   2666   20595360</span>
<span class="co">#&gt; 3 Brazil       1999  37737  172006362</span>
<span class="co">#&gt; 4 Brazil       2000  80488  174504898</span>
<span class="co">#&gt; 5 China        1999 212258 1272915272</span>
<span class="co">#&gt; 6 China        2000 213766 1280428583</span>
table2
<span class="co">#&gt; # A tibble: 12 x 4</span>
<span class="co">#&gt;   country      year type           count</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;          &lt;int&gt;</span>
<span class="co">#&gt; 1 Afghanistan  1999 cases            745</span>
<span class="co">#&gt; 2 Afghanistan  1999 population  19987071</span>
<span class="co">#&gt; 3 Afghanistan  2000 cases           2666</span>
<span class="co">#&gt; 4 Afghanistan  2000 population  20595360</span>
<span class="co">#&gt; 5 Brazil       1999 cases          37737</span>
<span class="co">#&gt; 6 Brazil       1999 population 172006362</span>
<span class="co">#&gt; # ... with 6 more rows</span>
table3
<span class="co">#&gt; # A tibble: 6 x 3</span>
<span class="co">#&gt;   country      year rate             </span>
<span class="co">#&gt; * &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;            </span>
<span class="co">#&gt; 1 Afghanistan  1999 745/19987071     </span>
<span class="co">#&gt; 2 Afghanistan  2000 2666/20595360    </span>
<span class="co">#&gt; 3 Brazil       1999 37737/172006362  </span>
<span class="co">#&gt; 4 Brazil       2000 80488/174504898  </span>
<span class="co">#&gt; 5 China        1999 212258/1272915272</span>
<span class="co">#&gt; 6 China        2000 213766/1280428583</span>

<span class="co"># Spread across two tibbles</span>
table4a  <span class="co"># cases</span>
<span class="co">#&gt; # A tibble: 3 x 3</span>
<span class="co">#&gt;   country     `1999` `2000`</span>
<span class="co">#&gt; * &lt;chr&gt;        &lt;int&gt;  &lt;int&gt;</span>
<span class="co">#&gt; 1 Afghanistan    745   2666</span>
<span class="co">#&gt; 2 Brazil       37737  80488</span>
<span class="co">#&gt; 3 China       212258 213766</span>
table4b  <span class="co"># population</span>
<span class="co">#&gt; # A tibble: 3 x 3</span>
<span class="co">#&gt;   country         `1999`     `2000`</span>
<span class="co">#&gt; * &lt;chr&gt;            &lt;int&gt;      &lt;int&gt;</span>
<span class="co">#&gt; 1 Afghanistan   19987071   20595360</span>
<span class="co">#&gt; 2 Brazil       172006362  174504898</span>
<span class="co">#&gt; 3 China       1272915272 1280428583</span></code></pre></div>
<p>이들은 모두 같은 데이터를 표현한 것이지만, 사용성이 같지는 않다. 타이디 데이터셋만이 tidyverse 내부에서 작업하기 훨씬 쉬울 것이다.</p>
<p>데이터셋을 타이디하게 만드는, 서로 연관된 세 가지 규칙이 있다.</p>
<ol style="list-style-type: decimal">
<li>변수마다 해당되는 열이 있어야 한다.<br />
</li>
<li>관측값마다 해당되는 행이 있어야 한다.</li>
<li>값마다 해당하는 하나의 셀이 있어야 한다.</li>
</ol>
<p>Figure <a href="tidy-data.html#fig:tidy-structure">10.1</a> 은 이러한 규칙을 시각적으로 보여준다.</p>
<div class="figure" style="text-align: center"><span id="fig:tidy-structure"></span>
<img src="images/tidy-1kr.png" alt="데이터셋을 타이디하게 만드는 세 가지 규칙: 변수는 열에 있고, 관측값은 행에 있고, 값은 셀에 있다." width="100%" />
<p class="caption">
Figure 10.1: 데이터셋을 타이디하게 만드는 세 가지 규칙: 변수는 열에 있고, 관측값은 행에 있고, 값은 셀에 있다.
</p>
</div>
<p>이 세 가지 규칙은 서로 연관되어 있다. 이 셋 중 두 가지만 충족시키는 것은 불가능하기 때문이다. 이 상호 관계때문에 다음의 더 간단하고 실용적인 지침이 도출된다.</p>
<ol style="list-style-type: decimal">
<li>데이터셋을 티블에 각각 넣어라.</li>
<li>변수를 열에 각각 넣어라.</li>
</ol>
<p>위의 예에서는 table1 만 타이디하다. 이 테이블만 유일하게 각 열이 변수인 표현이다.</p>
<p>데이터가 타이디해야 하는 이유는 무엇인가? 주요 장점은 두 가지이다.</p>
<ol style="list-style-type: decimal">
<li><p>데이터를 일관된 방식으로 저장하면 일반적으로 장점이 있다. 일관된 데이터 구조를 사용하면 이에 적용할 도구들이 공통성을 가지게 되어, 이들을 배우기가 더 쉬워진다.</p></li>
<li><p>변수를 열에 배치하면 R의 벡터화 속성이 가장 잘 발휘된다는 점에서 구체적인 장점이 있다. <a href="transform.html#mutate-funs">뮤테이트</a> 와 <a href="#summary-funs">요약 함수</a> 에서 배웠겠지만, 대부분의 내장 R 함수는 벡터에 작동한다. 이러한 성질 때문에 타이디 데이터로 작업하는 것이 더 자연스럽게 된다.</p></li>
</ol>
<p><strong>dplyr, ggplot2</strong> 를 비롯한 tidyverse 의 모든 패키지는 타이디 데이터로 동작하도록 설계되었다. 다음은 <code>table1</code> 을 사용하여 작업하는 방법을 보여주는 몇 가지 간단한 예제이다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Compute rate per 10,000</span>
table1 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">rate =</span> cases <span class="op">/</span><span class="st"> </span>population <span class="op">*</span><span class="st"> </span><span class="dv">10000</span>)
<span class="co">#&gt; # A tibble: 6 x 5</span>
<span class="co">#&gt;   country      year  cases population  rate</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;int&gt;  &lt;int&gt;      &lt;int&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Afghanistan  1999    745   19987071 0.373</span>
<span class="co">#&gt; 2 Afghanistan  2000   2666   20595360 1.29 </span>
<span class="co">#&gt; 3 Brazil       1999  37737  172006362 2.19 </span>
<span class="co">#&gt; 4 Brazil       2000  80488  174504898 4.61 </span>
<span class="co">#&gt; 5 China        1999 212258 1272915272 1.67 </span>
<span class="co">#&gt; 6 China        2000 213766 1280428583 1.67</span>

<span class="co"># Compute cases per year</span>
table1 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">count</span>(year, <span class="dt">wt =</span> cases)
<span class="co">#&gt; # A tibble: 2 x 2</span>
<span class="co">#&gt;    year      n</span>
<span class="co">#&gt;   &lt;int&gt;  &lt;int&gt;</span>
<span class="co">#&gt; 1  1999 250740</span>
<span class="co">#&gt; 2  2000 296920</span>

<span class="co"># Visualise changes over time</span>
<span class="kw">library</span>(ggplot2)
<span class="kw">ggplot</span>(table1, <span class="kw">aes</span>(year, cases)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">group =</span> country), <span class="dt">colour =</span> <span class="st">&quot;grey50&quot;</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">colour =</span> country))</code></pre></div>
<p><img src="tidy_files/figure-html/unnamed-chunk-3-1.png" width="50%" style="display: block; margin: auto;" /></p>
<div id="-17" class="section level3">
<h3><span class="header-section-number">10.2.1</span> 연습문제</h3>
<ol style="list-style-type: decimal">
<li><p>변수와 관측값이 각 샘플 테이블에서 어떻게 구성되어 있는지 설명하라.</p></li>
<li><p><code>table2</code> 와 <code>table4a + table4b</code> 에서 비율 (<code>rate</code> )을 계산하라. 다음의 네 가지 작업을 수행해야 한다.</p>
<ol style="list-style-type: decimal">
<li><p>연도별, 국가별로 결핵 사례수(case)를 추출하라.</p></li>
<li><p>연도별, 국가별로 해당하는 인구를 추출하라.</p></li>
<li><p>사례수를 인구로 나누고 10,000을 곱하라.</p></li>
<li><p>적절한 곳에 다시 저장하라.</p></li>
</ol></li>
<li><p>가장 쉬운 표현법은 무엇인가? 어느 것이 가장 어려운가? 이유는?</p></li>
<li><p><code>table1</code> 대신 <code>table2</code> 를 사용하여 시간 경과에 따른 사례수의 변화를 보여주는 플롯을 재생성하라. 먼저 무엇을 해야 하는가?</p></li>
</ol>
</div>
</div>
<div id="gather--spread" class="section level2">
<h2><span class="header-section-number">10.3</span> gather 와 spread</h2>
<p>타이디 데이터의 원리는 너무 당연해 보여서, 과연 타이디하지 않은 데이터셋을 볼 일은 있을지 의문이 들 것이다. 하지만, 불행하게도 여러분이 마주치게 될 대부분의 데이터는 타이디하지 않을 것이다. 크게 두 가지 이유가 있다.</p>
<ol style="list-style-type: decimal">
<li><p>대부분의 사람들은 타이디 데이터의 원리에 익숙하지 않으며, 데이터 작업에 많은 시간을 써야만 타이디 데이터로 만들 수 있다.</p></li>
<li><p>데이터는 분석보다는 다른 용도에 편리하도록 구성되는 경우가 많다. 예를 들어 데이터는 가능한 한 쉽게 입력할 수 있도록 구성되기도 한다.</p></li>
</ol>
<p>따라서, 대부분의 실제 분석에서는 타이디하게 만드는 작업이 필요하다. 첫번째 단계는 항상 변수와 관측값이 무엇인지 파악하는 것이다. 이 작업이 쉬울 때도 있지만, 어떤 경우에는 데이터를 처음 생성한 사람들과 상의해야 할 수도 있다. 두 번째 단계는 자주 일어나는 다음의 두 가지 문제 중 하나를 해결하는 것이다.</p>
<ol style="list-style-type: decimal">
<li>하나의 변수가 여러 열에 분산되어 있을 수 있다.</li>
<li>하나의 관측값이 여러 행에 흩어져 있을 수 있다.</li>
</ol>
<div id="gather" class="section level3">
<h3><span class="header-section-number">10.3.1</span> Gather</h3>
<p>자주 생기는 문제는 데이터셋의 일부 열 이름이 변수 이름이 아니라 변수 값인 경우이다. <code>table4a</code> 를 보면 열 이름 1999와 2000은 <code>year</code> 변수 값을 나타내며, 각 행은 하나가 아닌 두 개의 관측값을 나타낸다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">table4a
<span class="co">#&gt; # A tibble: 3 x 3</span>
<span class="co">#&gt;   country     `1999` `2000`</span>
<span class="co">#&gt; * &lt;chr&gt;        &lt;int&gt;  &lt;int&gt;</span>
<span class="co">#&gt; 1 Afghanistan    745   2666</span>
<span class="co">#&gt; 2 Brazil       37737  80488</span>
<span class="co">#&gt; 3 China       212258 213766</span></code></pre></div>
<p>이와 같은 데이터셋을 타이디하게 만들려면 해당 열을 새로운 두 변수로 수집<strong>(gather)</strong> 해야 한다. 이 작업을 설명하기 위해 세 가지 파라미터가 필요하다.</p>
<ul>
<li><p>변수가 아니라 값을 나타내는 열 집합. 이 예에서는 열 <code>1999</code> 과 열 <code>2000</code> 이다.</p></li>
<li><p>열 이름 자리에 나타난 값의 변수 이름. 이를 나는 <code>key</code> 라고 부르며, 여기에서는 <code>year</code> 이다.</p></li>
<li><p>셀에 값이 분산되어 있는 변수의 이름. 이를 나는 <code>value</code> 라고 부르며, 여기에서는 <code>cases</code> (사례수) 이다.</p></li>
</ul>
<p>이러한 파라미터와 함께 <code>gather()</code> 호출을 생성할 수 있다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">table4a <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">gather</span>(<span class="st">`</span><span class="dt">1999</span><span class="st">`</span>, <span class="st">`</span><span class="dt">2000</span><span class="st">`</span>, <span class="dt">key =</span> <span class="st">&quot;year&quot;</span>, <span class="dt">value =</span> <span class="st">&quot;cases&quot;</span>)
<span class="co">#&gt; # A tibble: 6 x 3</span>
<span class="co">#&gt;   country     year   cases</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;  &lt;int&gt;</span>
<span class="co">#&gt; 1 Afghanistan 1999     745</span>
<span class="co">#&gt; 2 Brazil      1999   37737</span>
<span class="co">#&gt; 3 China       1999  212258</span>
<span class="co">#&gt; 4 Afghanistan 2000    2666</span>
<span class="co">#&gt; 5 Brazil      2000   80488</span>
<span class="co">#&gt; 6 China       2000  213766</span></code></pre></div>
<p>수집하고자 하는 열을 지정하는 법은 <code>dplyr::select()</code> 스타일 표기법을 따른다. 여기에는 두 개의 열만 있으므로 개별적으로 나열한다. ’1999’ 와 ’2000’ 은 구문론적 이름이 아니므로 역따옴표로 둘러쌓아야 함을 주목하라. 열을 선택하는 다른 방법에 대해 기억이 나지 않는다면 <a href="transform.html#select">select() 로 열 선택</a>’ 을 참조하라.</p>
<div class="figure" style="text-align: center"><span id="fig:tidy-gather"></span>
<img src="images/tidy-9.png" alt="Gathering `table4` into a tidy form." width="100%" />
<p class="caption">
Figure 10.2: Gathering <code>table4</code> into a tidy form.
</p>
</div>
<p>최종 결과에서, 수집된 열은 삭제되고 새 <code>key</code> 와 <code>value</code> 열이 생성된다. 한편, 원래 변수 간의 관계는 보존된다. 이는 Figure <a href="tidy-data.html#fig:tidy-gather">10.2</a> 에 시각적으로 표현되어 있다. <code>table4b</code> 를 비슷한 방법으로 타이디하게 할 때 <code>gather()</code> 를 사용할 수 있다. 유일한 차이점은 셀 값에 저장된 변수이다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">table4b <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">gather</span>(<span class="st">`</span><span class="dt">1999</span><span class="st">`</span>, <span class="st">`</span><span class="dt">2000</span><span class="st">`</span>, <span class="dt">key =</span> <span class="st">&quot;year&quot;</span>, <span class="dt">value =</span> <span class="st">&quot;population&quot;</span>)
<span class="co">#&gt; # A tibble: 6 x 3</span>
<span class="co">#&gt;   country     year  population</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;      &lt;int&gt;</span>
<span class="co">#&gt; 1 Afghanistan 1999    19987071</span>
<span class="co">#&gt; 2 Brazil      1999   172006362</span>
<span class="co">#&gt; 3 China       1999  1272915272</span>
<span class="co">#&gt; 4 Afghanistan 2000    20595360</span>
<span class="co">#&gt; 5 Brazil      2000   174504898</span>
<span class="co">#&gt; 6 China       2000  1280428583</span></code></pre></div>
<p><code>table4a</code> 와 <code>table4b</code> 의 타이디하게 된 버전을 하나의 티블로 결합하려면 <code>dplyr::left_join()</code> 을 사용해야 한다. 이 내용은 <a href="relational-data.html#relational-data">관계형 데이터</a> 에서 다룰 것이다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tidy4a &lt;-<span class="st"> </span>table4a <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">gather</span>(<span class="st">`</span><span class="dt">1999</span><span class="st">`</span>, <span class="st">`</span><span class="dt">2000</span><span class="st">`</span>, <span class="dt">key =</span> <span class="st">&quot;year&quot;</span>, <span class="dt">value =</span> <span class="st">&quot;cases&quot;</span>)
tidy4b &lt;-<span class="st"> </span>table4b <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">gather</span>(<span class="st">`</span><span class="dt">1999</span><span class="st">`</span>, <span class="st">`</span><span class="dt">2000</span><span class="st">`</span>, <span class="dt">key =</span> <span class="st">&quot;year&quot;</span>, <span class="dt">value =</span> <span class="st">&quot;population&quot;</span>)
<span class="kw">left_join</span>(tidy4a, tidy4b)
<span class="co">#&gt; Joining, by = c(&quot;country&quot;, &quot;year&quot;)</span>
<span class="co">#&gt; # A tibble: 6 x 4</span>
<span class="co">#&gt;   country     year   cases population</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;  &lt;int&gt;      &lt;int&gt;</span>
<span class="co">#&gt; 1 Afghanistan 1999     745   19987071</span>
<span class="co">#&gt; 2 Brazil      1999   37737  172006362</span>
<span class="co">#&gt; 3 China       1999  212258 1272915272</span>
<span class="co">#&gt; 4 Afghanistan 2000    2666   20595360</span>
<span class="co">#&gt; 5 Brazil      2000   80488  174504898</span>
<span class="co">#&gt; 6 China       2000  213766 1280428583</span></code></pre></div>
</div>
<div id="spread" class="section level3">
<h3><span class="header-section-number">10.3.2</span> Spread</h3>
<p>펼치기는 수집하기의 반대이다. 관측값이 여러 행에 흩어져 있을 때 사용한다. 예를 들어 <code>table2</code> 를 보자. 하나의 관측값은 한 해, 한 국가에 대한 것이지만, 각 관측값이 두 행에 흩어져 있다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">table2
<span class="co">#&gt; # A tibble: 12 x 4</span>
<span class="co">#&gt;   country      year type           count</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;          &lt;int&gt;</span>
<span class="co">#&gt; 1 Afghanistan  1999 cases            745</span>
<span class="co">#&gt; 2 Afghanistan  1999 population  19987071</span>
<span class="co">#&gt; 3 Afghanistan  2000 cases           2666</span>
<span class="co">#&gt; 4 Afghanistan  2000 population  20595360</span>
<span class="co">#&gt; 5 Brazil       1999 cases          37737</span>
<span class="co">#&gt; 6 Brazil       1999 population 172006362</span>
<span class="co">#&gt; # ... with 6 more rows</span></code></pre></div>
<p>이것을 타이디하게 하기 위해, 먼저 <code>gather()</code> 와 비슷한 방식으로 표현방법을 분석한다. 그러나 이번에는 파라미터가 두 개만 필요하다.</p>
<ul>
<li><p>변수 이름을 포함하는 열, 즉 <code>key</code> 열. 여기에서는 <code>type</code> 이다.</p></li>
<li><p>여러 변수를 형성하는 값을 포함하는 열, 즉 <code>value</code> 열. 여기에서는 <code>count</code> 이다.</p></li>
</ul>
<p>이 파라미터들을 정하면 <code>spread()</code> 를 사용할 수 있다. 코드로는 아래에서 보여주고, 시각적으로는 Figure <a href="tidy-data.html#fig:tidy-spread">10.3</a> 에서 보여주고 있다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">table2 <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">spread</span>(<span class="dt">key =</span> type, <span class="dt">value =</span> count)
<span class="co">#&gt; # A tibble: 6 x 4</span>
<span class="co">#&gt;   country      year  cases population</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;int&gt;  &lt;int&gt;      &lt;int&gt;</span>
<span class="co">#&gt; 1 Afghanistan  1999    745   19987071</span>
<span class="co">#&gt; 2 Afghanistan  2000   2666   20595360</span>
<span class="co">#&gt; 3 Brazil       1999  37737  172006362</span>
<span class="co">#&gt; 4 Brazil       2000  80488  174504898</span>
<span class="co">#&gt; 5 China        1999 212258 1272915272</span>
<span class="co">#&gt; 6 China        2000 213766 1280428583</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:tidy-spread"></span>
<img src="images/tidy-8.png" alt="Spreading `table2` makes it tidy" width="100%" />
<p class="caption">
Figure 10.3: Spreading <code>table2</code> makes it tidy
</p>
</div>
<p>공통의 <code>key</code> 와 <code>value</code> 인수를 통해 추측해 본 사람도 있었겠지만, <code>spread()</code> 와 <code>gather()</code> 는 보완 관계이다. <code>gather()</code> 는 넓은 테이블을 더 좁고 길게, <code>spread()</code> 는 긴 테이블을 더 짧고 넓게 만든다.</p>
</div>
<div id="-18" class="section level3">
<h3><span class="header-section-number">10.3.3</span> 연습문제</h3>
<ol style="list-style-type: decimal">
<li><p><code>gather()</code> 와 <code>spread()</code> 가 완벽하게 대칭이 아닌 이유는 무엇인가? 다음 예제를 주의 깊게 살펴보라.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">stocks &lt;-<span class="st"> </span><span class="kw">tibble</span>(
  <span class="dt">year   =</span> <span class="kw">c</span>(<span class="dv">2015</span>, <span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2016</span>),
  <span class="dt">half  =</span> <span class="kw">c</span>(   <span class="dv">1</span>,    <span class="dv">2</span>,     <span class="dv">1</span>,    <span class="dv">2</span>),
  <span class="dt">return =</span> <span class="kw">c</span>(<span class="fl">1.88</span>, <span class="fl">0.59</span>, <span class="fl">0.92</span>, <span class="fl">0.17</span>)
)
stocks <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">spread</span>(year, return) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">gather</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;return&quot;</span>, <span class="st">`</span><span class="dt">2015</span><span class="st">`</span><span class="op">:</span><span class="st">`</span><span class="dt">2016</span><span class="st">`</span>)</code></pre></div>
<p>(힌트: 변수 유형을 보고 열 이름에 대해 생각해보라.)</p>
<p><code>spread()</code> 와 <code>gather()</code> 에는 모두 <code>convert</code> 인수가 있다. 어떤 역할을 하는가?</p></li>
<li><p>이 코드가 작동하지 않는 이유는 무엇인가?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">table4a <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">gather</span>(<span class="dv">1999</span>, <span class="dv">2000</span>, <span class="dt">key =</span> <span class="st">&quot;year&quot;</span>, <span class="dt">value =</span> <span class="st">&quot;cases&quot;</span>)
<span class="co">#&gt; Error in inds_combine(.vars, ind_list): Position must be between 0 and n</span></code></pre></div></li>
<li><p>티블을 펼치는 다음의 코드는 왜 에러가 나는가? 새로운 열을 추가해서 어떻게 문제를 해결할 수 있는가?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">people &lt;-<span class="st"> </span><span class="kw">tribble</span>(
  <span class="op">~</span>name,             <span class="op">~</span>key,    <span class="op">~</span>value,
  <span class="co">#-----------------|--------|------</span>
  <span class="st">&quot;Phillip Woods&quot;</span>,   <span class="st">&quot;age&quot;</span>,       <span class="dv">45</span>,
  <span class="st">&quot;Phillip Woods&quot;</span>,   <span class="st">&quot;height&quot;</span>,   <span class="dv">186</span>,
  <span class="st">&quot;Phillip Woods&quot;</span>,   <span class="st">&quot;age&quot;</span>,       <span class="dv">50</span>,
  <span class="st">&quot;Jessica Cordero&quot;</span>, <span class="st">&quot;age&quot;</span>,       <span class="dv">37</span>,
  <span class="st">&quot;Jessica Cordero&quot;</span>, <span class="st">&quot;height&quot;</span>,   <span class="dv">156</span>
)</code></pre></div></li>
<li><p>다음의 간단한 티블을 타이디하게 하라. 펼치거나 수집할 필요가 있는가? 변수는 무엇인가?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">preg &lt;-<span class="st"> </span><span class="kw">tribble</span>(
  <span class="op">~</span>pregnant, <span class="op">~</span>male, <span class="op">~</span>female,
  <span class="st">&quot;yes&quot;</span>,     <span class="ot">NA</span>,    <span class="dv">10</span>,
  <span class="st">&quot;no&quot;</span>,      <span class="dv">20</span>,    <span class="dv">12</span>
)</code></pre></div></li>
</ol>
</div>
</div>
<div id="separate--unite" class="section level2">
<h2><span class="header-section-number">10.4</span> separate 과 unite</h2>
<p>지금까지 <code>table2</code> 와 <code>table4</code> 를 타이디하게 하는 방법을 배웠지만 <code>table3</code> 은 하지 않았다. <code>table3</code> 에는 다른 문제가 있다. 두 개의 변수(<code>cases</code> 및 <code>population</code> )가 포함된 한 개의 열(<code>rate</code> )이 있다. 이 문제를 해결하려면 <code>separate()</code> 함수가 필요하다. 또한 하나의 변수가 여러 열에 분산되어 있는 경우에 사용하는, <code>separate()</code> 의 보완 함수인 <code>unite()</code> 에 대해서도 학습한다.</p>
<div id="separate" class="section level3">
<h3><span class="header-section-number">10.4.1</span> separate</h3>
<p><code>separate()</code> 는 구분 문자가 나타나는 곳마다 쪼개서 하나의 열을 여러 열로 분리한다. <code>table3</code> 를 보자.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">table3
<span class="co">#&gt; # A tibble: 6 x 3</span>
<span class="co">#&gt;   country      year rate             </span>
<span class="co">#&gt; * &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;            </span>
<span class="co">#&gt; 1 Afghanistan  1999 745/19987071     </span>
<span class="co">#&gt; 2 Afghanistan  2000 2666/20595360    </span>
<span class="co">#&gt; 3 Brazil       1999 37737/172006362  </span>
<span class="co">#&gt; 4 Brazil       2000 80488/174504898  </span>
<span class="co">#&gt; 5 China        1999 212258/1272915272</span>
<span class="co">#&gt; 6 China        2000 213766/1280428583</span></code></pre></div>
<p><code>rate</code> 열은 <code>cases</code> 와 <code>population</code> 변수를 모두 포함하므로 두 변수로 쪼개야 한다. <code>separate()</code> 는 분리할 열 이름과, 분리하여 만들 열 이름을 필요로 한다. Figure <a href="tidy-data.html#fig:tidy-separate">10.4</a> 와 다음 코드에서 이를 확인하자.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">table3 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">separate</span>(rate, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;cases&quot;</span>, <span class="st">&quot;population&quot;</span>))
<span class="co">#&gt; # A tibble: 6 x 4</span>
<span class="co">#&gt;   country      year cases  population</span>
<span class="co">#&gt; * &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;     </span>
<span class="co">#&gt; 1 Afghanistan  1999 745    19987071  </span>
<span class="co">#&gt; 2 Afghanistan  2000 2666   20595360  </span>
<span class="co">#&gt; 3 Brazil       1999 37737  172006362 </span>
<span class="co">#&gt; 4 Brazil       2000 80488  174504898 </span>
<span class="co">#&gt; 5 China        1999 212258 1272915272</span>
<span class="co">#&gt; 6 China        2000 213766 1280428583</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:tidy-separate"></span>
<img src="images/tidy-17.png" alt="Separating `table3` makes it tidy" width="75%" />
<p class="caption">
Figure 10.4: Separating <code>table3</code> makes it tidy
</p>
</div>
<p>기본적으로 <code>separate()</code> 는 숫자나 글자가 아닌 문자를 볼 때마다 값을 쪼갠다. 예를 들어 앞의 코드에서 <code>separate()</code> 는 슬래시 문자로 <code>rate</code> 값을 쪼갠다. 특정 문자를 사용하여 열을 구분하려면 이를 <code>separate()</code> 의 <code>sep</code> 인수로 전달하면 된다. 예를 들어 이전 코드를 다음과 같이 다시 작성할 수 있다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">table3 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">separate</span>(rate, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;cases&quot;</span>, <span class="st">&quot;population&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot;/&quot;</span>)</code></pre></div>
<p>(공식적으로 말하면 <code>sep</code> 은 정규표현식이며, <a href="strings.html#strings">문자열</a>에서 자세히 배울 것이다.)</p>
<p>열 유형을 주의 깊게 살펴보라. <code>case</code> 와 <code>population</code> 은 문자형 열이라는 것을 알아챘을 것이다. 이는 <code>separate()</code> 의 기본 동작이다. 즉, 열의 유형을 그대로 유지한다. 그러나 이들이 사실은 숫자이므로 기본 동작이 유용하지는 않다. <code>convert = TRUE</code> 를 하면 <code>separate()</code> 이 더 나은 유형으로 변환을 시도한다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">table3 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">separate</span>(rate, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;cases&quot;</span>, <span class="st">&quot;population&quot;</span>), <span class="dt">convert =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt; # A tibble: 6 x 4</span>
<span class="co">#&gt;   country      year  cases population</span>
<span class="co">#&gt; * &lt;chr&gt;       &lt;int&gt;  &lt;int&gt;      &lt;int&gt;</span>
<span class="co">#&gt; 1 Afghanistan  1999    745   19987071</span>
<span class="co">#&gt; 2 Afghanistan  2000   2666   20595360</span>
<span class="co">#&gt; 3 Brazil       1999  37737  172006362</span>
<span class="co">#&gt; 4 Brazil       2000  80488  174504898</span>
<span class="co">#&gt; 5 China        1999 212258 1272915272</span>
<span class="co">#&gt; 6 China        2000 213766 1280428583</span></code></pre></div>
<p><code>sep</code> 에 정수 벡터를 전달할 수도 있다. <code>separate()</code> 는 이 정수를 쪼갤 위치로 해석할 것이다. 양수 값은 문자열의 가장 왼쪽에서 1부터 시작한다. 음수 값은 문자열의 맨 오른쪽에서 -1 부터 시작한다. 정수를 사용하여 문자열을 분리할 때 <code>sep</code> 의 길이는 <code>into</code> 의 이름 개수보다 하나 작아야 한다.</p>
<p>이 배열을 사용하여 각 연도의 마지막 두 자리를 분리할 수 있다. 이렇게 하면 이 데이터가 덜 깔끔하게 되지만, 어떤 경우에는 유용하다. 잠시 뒤에 보게 될 것이다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">table3 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">separate</span>(year, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;century&quot;</span>, <span class="st">&quot;year&quot;</span>), <span class="dt">sep =</span> <span class="dv">2</span>)
<span class="co">#&gt; # A tibble: 6 x 4</span>
<span class="co">#&gt;   country     century year  rate             </span>
<span class="co">#&gt; * &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;            </span>
<span class="co">#&gt; 1 Afghanistan 19      99    745/19987071     </span>
<span class="co">#&gt; 2 Afghanistan 20      00    2666/20595360    </span>
<span class="co">#&gt; 3 Brazil      19      99    37737/172006362  </span>
<span class="co">#&gt; 4 Brazil      20      00    80488/174504898  </span>
<span class="co">#&gt; 5 China       19      99    212258/1272915272</span>
<span class="co">#&gt; 6 China       20      00    213766/1280428583</span></code></pre></div>
</div>
<div id="unite" class="section level3">
<h3><span class="header-section-number">10.4.2</span> unite</h3>
<p><code>unite()</code> 는 <code>separate()</code> 의 반대이다. 여러 열을 하나의 열로 결합한다. <code>separate()</code> 보다 훨씬 드물게 필요하겠지만, 포켓에 가지고 다닐 만큼 유용한 도구이다.</p>
<div class="figure" style="text-align: center"><span id="fig:tidy-unite"></span>
<img src="images/tidy-18.png" alt="Uniting `table5` makes it tidy" width="75%" />
<p class="caption">
Figure 10.5: Uniting <code>table5</code> makes it tidy
</p>
</div>
<p><code>unite()</code> 를 사용하여 마지막 예제에서 만든 <code>century</code> 열과 <code>year</code> 열을 다시 결합할 수 있다. 이 데이터는 <code>tidyr::table5</code> 로 저장되어 있다. <code>unite()</code> 는 데이터프레임, 생성할 새 변수의 이름 및 결합할 열 집합 (이번에도 <code>dplyr::select()</code> 방식으로 표현) 을 필요로 한다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">table5 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">unite</span>(new, century, year)
<span class="co">#&gt; # A tibble: 6 x 3</span>
<span class="co">#&gt;   country     new   rate             </span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;            </span>
<span class="co">#&gt; 1 Afghanistan 19_99 745/19987071     </span>
<span class="co">#&gt; 2 Afghanistan 20_00 2666/20595360    </span>
<span class="co">#&gt; 3 Brazil      19_99 37737/172006362  </span>
<span class="co">#&gt; 4 Brazil      20_00 80488/174504898  </span>
<span class="co">#&gt; 5 China       19_99 212258/1272915272</span>
<span class="co">#&gt; 6 China       20_00 213766/1280428583</span></code></pre></div>
<p>이 경우 <code>sep</code> 인수도 사용해야 한다. 기본 설정은 다른 열의 값 사이에 언더스코어 (<code>_</code> )를 붙이는 것이다. 여기서는 분리 기호를 원하지 않으므로 <code>&quot;&quot;</code> 을 사용한다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">table5 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">unite</span>(new, century, year, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>)
<span class="co">#&gt; # A tibble: 6 x 3</span>
<span class="co">#&gt;   country     new   rate             </span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;            </span>
<span class="co">#&gt; 1 Afghanistan 1999  745/19987071     </span>
<span class="co">#&gt; 2 Afghanistan 2000  2666/20595360    </span>
<span class="co">#&gt; 3 Brazil      1999  37737/172006362  </span>
<span class="co">#&gt; 4 Brazil      2000  80488/174504898  </span>
<span class="co">#&gt; 5 China       1999  212258/1272915272</span>
<span class="co">#&gt; 6 China       2000  213766/1280428583</span></code></pre></div>
</div>
<div id="-19" class="section level3">
<h3><span class="header-section-number">10.4.3</span> 연습문제</h3>
<ol style="list-style-type: decimal">
<li><p><code>separate()</code> 의 <code>extra</code> 인수와 <code>fill</code> 인수의 역할은 무엇인가? 다음 두 개의 토이 데이터셋에 다양한 옵션을 실험해보라.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">&quot;a,b,c&quot;</span>, <span class="st">&quot;d,e,f,g&quot;</span>, <span class="st">&quot;h,i,j&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">separate</span>(x, <span class="kw">c</span>(<span class="st">&quot;one&quot;</span>, <span class="st">&quot;two&quot;</span>, <span class="st">&quot;three&quot;</span>))

<span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">&quot;a,b,c&quot;</span>, <span class="st">&quot;d,e&quot;</span>, <span class="st">&quot;f,g,i&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">separate</span>(x, <span class="kw">c</span>(<span class="st">&quot;one&quot;</span>, <span class="st">&quot;two&quot;</span>, <span class="st">&quot;three&quot;</span>))</code></pre></div></li>
<li><p><code>unite()</code> 및 <code>separate()</code> 에는 모두 <code>remove</code> 인수가 있다. 이 인수의 역할은 무엇인가? 왜 <code>FALSE</code> 로 설정하겠는가?</p></li>
<li><p><code>separate()</code> 와 <code>extract()</code> 를 비교대조하라. 분리 방법은 세 가지(위치, 구분 기호, 그룹별)가 있지만 결합하는 방법(unite)은 한 가지인 이유는 무엇인가?</p></li>
</ol>
</div>
</div>
<div id="-2" class="section level2">
<h2><span class="header-section-number">10.5</span> 결측값</h2>
<p>데이터셋의 표현 방식을 변경하면 결측값에 중요하고도 미묘한 이슈가 나타난다. 놀랍게도 데이터값은 다음 두 가지 방식으로 결측될 수 있다.</p>
<ul>
<li><strong>명시적</strong> 으로 즉, <code>NA</code> 로 표시됨.</li>
<li><strong>암묵적</strong> 으로, 즉 단순히 데이터에 존재하지 않음.</li>
</ul>
<p>아주 간단한 데이터셋으로 이를 설명해보자.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">stocks &lt;-<span class="st"> </span><span class="kw">tibble</span>(
  <span class="dt">year   =</span> <span class="kw">c</span>(<span class="dv">2015</span>, <span class="dv">2015</span>, <span class="dv">2015</span>, <span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2016</span>, <span class="dv">2016</span>),
  <span class="dt">qtr    =</span> <span class="kw">c</span>(   <span class="dv">1</span>,    <span class="dv">2</span>,    <span class="dv">3</span>,    <span class="dv">4</span>,    <span class="dv">2</span>,    <span class="dv">3</span>,    <span class="dv">4</span>),
  <span class="dt">return =</span> <span class="kw">c</span>(<span class="fl">1.88</span>, <span class="fl">0.59</span>, <span class="fl">0.35</span>,   <span class="ot">NA</span>, <span class="fl">0.92</span>, <span class="fl">0.17</span>, <span class="fl">2.66</span>)
)</code></pre></div>
<p>이 데이터셋에는 다음 두 가지 결측값이 있다.</p>
<ul>
<li><p>2015 년 4 분기 수익은 명백하게 결측되어 있다. 그 값이 있어야 할 셀에 <code>NA</code> 가 대신 있기 때문이다.</p></li>
<li><p>2016 년 1 분기 수익은 암묵적으로 결측되었다. 수익이 데이터셋에 없기 때문이다.</p></li>
</ul>
<p>다음의 선문답으로 둘의 차이를 생각해볼 수 있다. 명시적 결측값은 결측의 존재이다. 암묵적 결측값은 존재의 결측이다.</p>
<p>데이터셋 표현법으로 암묵적 값을 명시적으로 만들 수 있다. 예를 들어 연도를 열로 넣어 암묵적 결측값을 명시적으로 만들 수 있다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">stocks <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">spread</span>(year, return)
<span class="co">#&gt; # A tibble: 4 x 3</span>
<span class="co">#&gt;     qtr `2015` `2016`</span>
<span class="co">#&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;</span>
<span class="co">#&gt; 1     1   1.88  NA   </span>
<span class="co">#&gt; 2     2   0.59   0.92</span>
<span class="co">#&gt; 3     3   0.35   0.17</span>
<span class="co">#&gt; 4     4  NA      2.66</span></code></pre></div>
<p>이러한 명시적인 결측값은 어떤 데이터 표현에서는 중요하지 않을 수 있으므로 <code>gather()</code> 에서 <code>na.rm = TRUE</code> 를 설정하여 명시적 결측값을 암묵적으로 전환할 수 있다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">stocks <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">spread</span>(year, return) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">gather</span>(year, return, <span class="st">`</span><span class="dt">2015</span><span class="st">`</span><span class="op">:</span><span class="st">`</span><span class="dt">2016</span><span class="st">`</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt; # A tibble: 6 x 3</span>
<span class="co">#&gt;     qtr year  return</span>
<span class="co">#&gt; * &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;</span>
<span class="co">#&gt; 1     1 2015    1.88</span>
<span class="co">#&gt; 2     2 2015    0.59</span>
<span class="co">#&gt; 3     3 2015    0.35</span>
<span class="co">#&gt; 4     2 2016    0.92</span>
<span class="co">#&gt; 5     3 2016    0.17</span>
<span class="co">#&gt; 6     4 2016    2.66</span></code></pre></div>
<p>타이디 데이터에서 결측값을 명시적으로 표현하는 또 다른 중요한 도구로 <code>complete()</code> 가 있다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">stocks <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">complete</span>(year, qtr)
<span class="co">#&gt; # A tibble: 8 x 3</span>
<span class="co">#&gt;    year   qtr return</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span>
<span class="co">#&gt; 1  2015     1   1.88</span>
<span class="co">#&gt; 2  2015     2   0.59</span>
<span class="co">#&gt; 3  2015     3   0.35</span>
<span class="co">#&gt; 4  2015     4  NA   </span>
<span class="co">#&gt; 5  2016     1  NA   </span>
<span class="co">#&gt; 6  2016     2   0.92</span>
<span class="co">#&gt; # ... with 2 more rows</span></code></pre></div>
<p><code>complete()</code> 는 열 집합을 취해, 고유한 조합을 모두 찾는다. 그런 다음 원본 데이터셋에 모든 값이 포함되도록, 필요한 곳에 명시적 <code>NA</code> 를 채운다.</p>
<p>결측값 작업할 때 알아야 할 중요한 도구가 하나 더 있다. 데이터 소스가 주로 데이터 입력에 사용된 경우 결측값은 이전 값이 전달되어야 함을 나타낸다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">treatment &lt;-<span class="st"> </span><span class="kw">tribble</span>(
  <span class="op">~</span><span class="st"> </span>person,           <span class="op">~</span><span class="st"> </span>treatment, <span class="op">~</span>response,
  <span class="st">&quot;Derrick Whitmore&quot;</span>, <span class="dv">1</span>,           <span class="dv">7</span>,
  <span class="ot">NA</span>,                 <span class="dv">2</span>,           <span class="dv">10</span>,
  <span class="ot">NA</span>,                 <span class="dv">3</span>,           <span class="dv">9</span>,
  <span class="st">&quot;Katherine Burke&quot;</span>,  <span class="dv">1</span>,           <span class="dv">4</span>
)</code></pre></div>
<p>이러한 결측값을 <code>fill()</code> 을 사용하여 채울 수 있다. 이 함수는 결측값을 가장 최근의 비결측값으로 치환하고자 하는 열(집합)을 취한다. 이를 마지막 관측값 이월이라고도 한다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">treatment <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">fill</span>(person)
<span class="co">#&gt; # A tibble: 4 x 3</span>
<span class="co">#&gt;   person           treatment response</span>
<span class="co">#&gt;   &lt;chr&gt;                &lt;dbl&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Derrick Whitmore         1        7</span>
<span class="co">#&gt; 2 Derrick Whitmore         2       10</span>
<span class="co">#&gt; 3 Derrick Whitmore         3        9</span>
<span class="co">#&gt; 4 Katherine Burke          1        4</span></code></pre></div>
<div id="-20" class="section level3">
<h3><span class="header-section-number">10.5.1</span> 연습문제</h3>
<ol style="list-style-type: decimal">
<li><p><code>spread()</code> 와 <code>complete()</code> 의 <code>fill</code> 인수를 비교∙대조하라.</p></li>
<li><p><code>fill()</code> 의 <code>direction</code> 인수는 무엇을 하는가?</p></li>
</ol>
</div>
</div>
<div id="-" class="section level2">
<h2><span class="header-section-number">10.6</span> 사례 연구</h2>
<p>데이터를 타이디하게 만들기 위해 배운 것을 모두 정리하면서 이 장을 끝내자. <code>tidyr::who</code> 데이터셋에는 결핵(TB) 사례가 연도, 국가, 나이, 성별 및 진단 방법별로 세분화되어 있다. 이 데이터는 2014년 세계보건기구 전세계 결핵 보고서에 실렸으며, <a href="http://www.who.int/tb/country/data/download/en/" class="uri">http://www.who.int/tb/country/data/download/en/</a>에서 얻을 수 있다.</p>
<p>이 데이터셋에는 역학 정보가 풍부하게 있지만, 제공된 데이터 형식으로 작업하는 것은 쉽지 않다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">who
<span class="co">#&gt; # A tibble: 7,240 x 60</span>
<span class="co">#&gt;   country iso2  iso3   year new_sp_m014 new_sp_m1524 new_sp_m2534</span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;int&gt;       &lt;int&gt;        &lt;int&gt;        &lt;int&gt;</span>
<span class="co">#&gt; 1 Afghan… AF    AFG    1980          NA           NA           NA</span>
<span class="co">#&gt; 2 Afghan… AF    AFG    1981          NA           NA           NA</span>
<span class="co">#&gt; 3 Afghan… AF    AFG    1982          NA           NA           NA</span>
<span class="co">#&gt; 4 Afghan… AF    AFG    1983          NA           NA           NA</span>
<span class="co">#&gt; 5 Afghan… AF    AFG    1984          NA           NA           NA</span>
<span class="co">#&gt; 6 Afghan… AF    AFG    1985          NA           NA           NA</span>
<span class="co">#&gt; # ... with 7,234 more rows, and 53 more variables: new_sp_m3544 &lt;int&gt;,</span>
<span class="co">#&gt; #   new_sp_m4554 &lt;int&gt;, new_sp_m5564 &lt;int&gt;, new_sp_m65 &lt;int&gt;,</span>
<span class="co">#&gt; #   new_sp_f014 &lt;int&gt;, new_sp_f1524 &lt;int&gt;, new_sp_f2534 &lt;int&gt;,</span>
<span class="co">#&gt; #   new_sp_f3544 &lt;int&gt;, new_sp_f4554 &lt;int&gt;, new_sp_f5564 &lt;int&gt;,</span>
<span class="co">#&gt; #   new_sp_f65 &lt;int&gt;, new_sn_m014 &lt;int&gt;, new_sn_m1524 &lt;int&gt;,</span>
<span class="co">#&gt; #   new_sn_m2534 &lt;int&gt;, new_sn_m3544 &lt;int&gt;, new_sn_m4554 &lt;int&gt;,</span>
<span class="co">#&gt; #   new_sn_m5564 &lt;int&gt;, new_sn_m65 &lt;int&gt;, new_sn_f014 &lt;int&gt;,</span>
<span class="co">#&gt; #   new_sn_f1524 &lt;int&gt;, new_sn_f2534 &lt;int&gt;, new_sn_f3544 &lt;int&gt;,</span>
<span class="co">#&gt; #   new_sn_f4554 &lt;int&gt;, new_sn_f5564 &lt;int&gt;, new_sn_f65 &lt;int&gt;,</span>
<span class="co">#&gt; #   new_ep_m014 &lt;int&gt;, new_ep_m1524 &lt;int&gt;, new_ep_m2534 &lt;int&gt;,</span>
<span class="co">#&gt; #   new_ep_m3544 &lt;int&gt;, new_ep_m4554 &lt;int&gt;, new_ep_m5564 &lt;int&gt;,</span>
<span class="co">#&gt; #   new_ep_m65 &lt;int&gt;, new_ep_f014 &lt;int&gt;, new_ep_f1524 &lt;int&gt;,</span>
<span class="co">#&gt; #   new_ep_f2534 &lt;int&gt;, new_ep_f3544 &lt;int&gt;, new_ep_f4554 &lt;int&gt;,</span>
<span class="co">#&gt; #   new_ep_f5564 &lt;int&gt;, new_ep_f65 &lt;int&gt;, newrel_m014 &lt;int&gt;,</span>
<span class="co">#&gt; #   newrel_m1524 &lt;int&gt;, newrel_m2534 &lt;int&gt;, newrel_m3544 &lt;int&gt;,</span>
<span class="co">#&gt; #   newrel_m4554 &lt;int&gt;, newrel_m5564 &lt;int&gt;, newrel_m65 &lt;int&gt;,</span>
<span class="co">#&gt; #   newrel_f014 &lt;int&gt;, newrel_f1524 &lt;int&gt;, newrel_f2534 &lt;int&gt;,</span>
<span class="co">#&gt; #   newrel_f3544 &lt;int&gt;, newrel_f4554 &lt;int&gt;, newrel_f5564 &lt;int&gt;,</span>
<span class="co">#&gt; #   newrel_f65 &lt;int&gt;</span></code></pre></div>
<p>이 데이터셋은 매우 전형적인 실데이터이다. 여기에는 열 중복, 이상한 가변 코드 및 다수의 결측값이 있다. 즉, <code>who</code> 데이터는 지저분해서 여러 단계를 통해 타이디하게 만들어야 한다. <strong>dplyr</strong> 처럼, <strong>tidyr</strong> 은 각 함수가 한 가지를 잘하도록 설계되었다. 따라서, 일반적으로 실제 상황에서는 여러 동사를 파이프라인으로 함께 연결해야 한다.</p>
<p>변수가 아닌 열을 모으는 것부터 시작하는 것이 대개 가장 좋다. 다음을 살펴보자.</p>
<ul>
<li><p><code>country</code> , <code>iso2</code> 및 <code>iso3</code> 는 국가를 중복해서 지정하는 세 개의 변수이다.</p></li>
<li><p><code>year</code> 또한 분명히 변수이다.</p></li>
<li><p>다른 모든 열은 아직 무엇인지 알 수 없지만, 변수 이름 (예: <code>new_sp_m014</code> , <code>new_ep_m014</code> , <code>new_ep_f014</code> )의 구조를 보면 이들은 변수가 아닌 값일 가능성이 있다.</p></li>
</ul>
<p>따라서 <code>new_sp_m014</code> 에서 <code>newrel_f65</code> 까지의 모든 열을 모을 필요가 있다. 그 값이 무엇을 나타내는지 아직 알지 못하기 때문에 일반 이름인 ’<code>key</code> ’라는 이름을 붙일 것이다. 셀이 사례수를 나타내는 것을 알고 있으므로 변수 <code>cases</code> 를 사용한다. 현재 표현에는 많은 결측값이 있으므로 <code>na.rm</code> 을 사용하여 있는 값에만 집중할 것이다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">who1 &lt;-<span class="st"> </span>who <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">gather</span>(new_sp_m014<span class="op">:</span>newrel_f65, <span class="dt">key =</span> <span class="st">&quot;key&quot;</span>, <span class="dt">value =</span> <span class="st">&quot;cases&quot;</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)
who1
<span class="co">#&gt; # A tibble: 76,046 x 6</span>
<span class="co">#&gt;   country     iso2  iso3   year key         cases</span>
<span class="co">#&gt; * &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt;       &lt;int&gt;</span>
<span class="co">#&gt; 1 Afghanistan AF    AFG    1997 new_sp_m014     0</span>
<span class="co">#&gt; 2 Afghanistan AF    AFG    1998 new_sp_m014    30</span>
<span class="co">#&gt; 3 Afghanistan AF    AFG    1999 new_sp_m014     8</span>
<span class="co">#&gt; 4 Afghanistan AF    AFG    2000 new_sp_m014    52</span>
<span class="co">#&gt; 5 Afghanistan AF    AFG    2001 new_sp_m014   129</span>
<span class="co">#&gt; 6 Afghanistan AF    AFG    2002 new_sp_m014    90</span>
<span class="co">#&gt; # ... with 7.604e+04 more rows</span></code></pre></div>
<p>새로운 <code>key</code> 열의 값을 세어서 값의 구조에 대한 힌트를 얻을 수 있다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">who1 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">count</span>(key)
<span class="co">#&gt; # A tibble: 56 x 2</span>
<span class="co">#&gt;   key              n</span>
<span class="co">#&gt;   &lt;chr&gt;        &lt;int&gt;</span>
<span class="co">#&gt; 1 new_ep_f014   1032</span>
<span class="co">#&gt; 2 new_ep_f1524  1021</span>
<span class="co">#&gt; 3 new_ep_f2534  1021</span>
<span class="co">#&gt; 4 new_ep_f3544  1021</span>
<span class="co">#&gt; 5 new_ep_f4554  1017</span>
<span class="co">#&gt; 6 new_ep_f5564  1017</span>
<span class="co">#&gt; # ... with 50 more rows</span></code></pre></div>
<p>머리를 굴려보고 몇 가지를 시도하면 나름대로 값의 구조를 분석할 수 있을 것이다. 하지만 다행스럽게도 우리는 데이터 사전을 써먹을 수 있다. 데이터 사전은 다음을 알려준다.</p>
<ol style="list-style-type: decimal">
<li><p>각 열의 처음 세 글자는 해당 열이 포함하는 결핵 사례가, 새로운 사례인지 과거 사례인지를 나타낸다. 이 데이터셋에서 각 열은 새로운 사례를 포함한다.</p></li>
<li><p>그 다음 두 글자는 다음의 결핵의 유형을 기술한다.</p>
<ul>
<li><code>rel</code> 은 재발 사례를 의미한다.</li>
<li><code>ep</code> 는 폐외 (extrapulmonary) 결핵 사례를 의미한다.</li>
<li><code>sn</code> 은 폐 얼룩으로 보이지 않는 폐결핵의 사례를 의미한다. (smear negative)<br />
</li>
<li><code>sp</code> 는 폐 얼룩으로 보이는 폐결핵 사례를 의미한다. (smear positive)</li>
</ul></li>
<li><p>여섯 번째 글자는 결핵 환자의 성별을 나타낸다. 남성(<code>m</code> )과 여성(<code>f</code> )으로 사례를 분류한다.</p></li>
<li><p>나머지 숫자는 연령대를 나타낸다. 다음의 7개 연령대로 사례를 분류한다.</p>
<ul>
<li>014 = 0-14세</li>
<li>1524 = 15-24세</li>
<li>2534 = 25-34세</li>
<li>3544 = 35-44세</li>
<li>4554 = 45-54세</li>
<li>5564 = 55-64세</li>
<li>65 = 65세 이상</li>
</ul></li>
</ol>
<p>열 이름의 형식을 약간 수정해야 한다. 열 이름이 <code>new_rel</code> 이 아니라 <code>newrel</code> 이기 때문에 불행하게도 이름에 일관성이 없다. (여기에서 이를 발견해내기는 쉽지 않지만, 수정하지 않으면 이후에 에러가 발생한다.) <a href="strings.html#strings">문자열</a>에서 <code>str_replace()</code> 에 대해 배우겠지만, 기본적인 아이디어는 간단하다. ’newrel‘ 문자를 ’new_rel‘ 문자로 바꾼다. 이렇게 하면 모든 변수 이름에서 일관성이 유지된다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">who2 &lt;-<span class="st"> </span>who1 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">key =</span> stringr<span class="op">::</span><span class="kw">str_replace</span>(key, <span class="st">&quot;newrel&quot;</span>, <span class="st">&quot;new_rel&quot;</span>))
who2
<span class="co">#&gt; # A tibble: 76,046 x 6</span>
<span class="co">#&gt;   country     iso2  iso3   year key         cases</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt;       &lt;int&gt;</span>
<span class="co">#&gt; 1 Afghanistan AF    AFG    1997 new_sp_m014     0</span>
<span class="co">#&gt; 2 Afghanistan AF    AFG    1998 new_sp_m014    30</span>
<span class="co">#&gt; 3 Afghanistan AF    AFG    1999 new_sp_m014     8</span>
<span class="co">#&gt; 4 Afghanistan AF    AFG    2000 new_sp_m014    52</span>
<span class="co">#&gt; 5 Afghanistan AF    AFG    2001 new_sp_m014   129</span>
<span class="co">#&gt; 6 Afghanistan AF    AFG    2002 new_sp_m014    90</span>
<span class="co">#&gt; # ... with 7.604e+04 more rows</span></code></pre></div>
<p>각 코드의 값을 <code>separate()</code> 2회 실행하여 분리할 수 있다. 첫 번째 실행은 각 언더스코어마다 코드를 쪼갠다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">who3 &lt;-<span class="st"> </span>who2 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">separate</span>(key, <span class="kw">c</span>(<span class="st">&quot;new&quot;</span>, <span class="st">&quot;type&quot;</span>, <span class="st">&quot;sexage&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>)
who3
<span class="co">#&gt; # A tibble: 76,046 x 8</span>
<span class="co">#&gt;   country     iso2  iso3   year new   type  sexage cases</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;  &lt;int&gt;</span>
<span class="co">#&gt; 1 Afghanistan AF    AFG    1997 new   sp    m014       0</span>
<span class="co">#&gt; 2 Afghanistan AF    AFG    1998 new   sp    m014      30</span>
<span class="co">#&gt; 3 Afghanistan AF    AFG    1999 new   sp    m014       8</span>
<span class="co">#&gt; 4 Afghanistan AF    AFG    2000 new   sp    m014      52</span>
<span class="co">#&gt; 5 Afghanistan AF    AFG    2001 new   sp    m014     129</span>
<span class="co">#&gt; 6 Afghanistan AF    AFG    2002 new   sp    m014      90</span>
<span class="co">#&gt; # ... with 7.604e+04 more rows</span></code></pre></div>
<p>그런 다음, <code>new</code> 열은 이 데이터셋에서 상수이므로 제거할 수 있다. 이 참에 <code>iso2</code> 와 <code>iso3</code> 도 중복이므로 함께 제거하자.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">who3 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">count</span>(new)
<span class="co">#&gt; # A tibble: 1 x 2</span>
<span class="co">#&gt;   new       n</span>
<span class="co">#&gt;   &lt;chr&gt; &lt;int&gt;</span>
<span class="co">#&gt; 1 new   76046</span>
who4 &lt;-<span class="st"> </span>who3 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>new, <span class="op">-</span>iso2, <span class="op">-</span>iso3)</code></pre></div>
<p>다음으로 <code>sexage</code> 를 <code>sex</code> 와 <code>age</code> 로 분리할 것이다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">who5 &lt;-<span class="st"> </span>who4 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">separate</span>(sexage, <span class="kw">c</span>(<span class="st">&quot;sex&quot;</span>, <span class="st">&quot;age&quot;</span>), <span class="dt">sep =</span> <span class="dv">1</span>)
who5
<span class="co">#&gt; # A tibble: 76,046 x 6</span>
<span class="co">#&gt;   country      year type  sex   age   cases</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt;</span>
<span class="co">#&gt; 1 Afghanistan  1997 sp    m     014       0</span>
<span class="co">#&gt; 2 Afghanistan  1998 sp    m     014      30</span>
<span class="co">#&gt; 3 Afghanistan  1999 sp    m     014       8</span>
<span class="co">#&gt; 4 Afghanistan  2000 sp    m     014      52</span>
<span class="co">#&gt; 5 Afghanistan  2001 sp    m     014     129</span>
<span class="co">#&gt; 6 Afghanistan  2002 sp    m     014      90</span>
<span class="co">#&gt; # ... with 7.604e+04 more rows</span></code></pre></div>
<p>자, 이제 <code>who</code> 데이터셋은 타이디해졌다!</p>
<p>여기에서 중간 결과를 새로운 변수에 할당하며, 코드를 한 번에 한 조각씩 보았었다. 이는 일반적인 대화식 작업 방식이 아니다. 대신 앞으로 다음과 같이 점차 복잡한 파이프를 만들게 될 것이다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">who <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">gather</span>(key, value, new_sp_m014<span class="op">:</span>newrel_f65, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">key =</span> stringr<span class="op">::</span><span class="kw">str_replace</span>(key, <span class="st">&quot;newrel&quot;</span>, <span class="st">&quot;new_rel&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">separate</span>(key, <span class="kw">c</span>(<span class="st">&quot;new&quot;</span>, <span class="st">&quot;var&quot;</span>, <span class="st">&quot;sexage&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>new, <span class="op">-</span>iso2, <span class="op">-</span>iso3) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">separate</span>(sexage, <span class="kw">c</span>(<span class="st">&quot;sex&quot;</span>, <span class="st">&quot;age&quot;</span>), <span class="dt">sep =</span> <span class="dv">1</span>)</code></pre></div>
<div id="-21" class="section level3">
<h3><span class="header-section-number">10.6.1</span> 연습문제</h3>
<ol style="list-style-type: decimal">
<li><p>이 사례 연구에서 올바른 값을 가지고 있는지 쉽게 확인하기 위해 <code>na.rm = TRUE</code> 로 설정했다. 이것은 합리적인가? 이 데이터셋에서 결측값은 어떻게 표현될지 생각해 보라. 암묵적인 결측값이 있는가? <code>NA</code> 와 0 의 차이점은 무엇인가?</p></li>
<li><p><code>mutate()</code> 단계를 무시하면 어떻게 되는가? <code>(mutate (key = stringr::str_replace (key, &quot;newrel&quot;, &quot;new_rel&quot;)))</code> .</p></li>
<li><p><code>iso2</code> 와 <code>iso3</code> 가 <code>country</code> 와 중복된다는 앞의 주장을 확인하라.</p></li>
<li><p>각 <code>country, year</code> 및 <code>sex</code> 에 대해 총 결핵 사례수를 계산하라. 정보를 시각적으로 보여라.</p></li>
</ol>
</div>
</div>
<div id="--" class="section level2">
<h2><span class="header-section-number">10.7</span> 타이디하지 않은 데이터</h2>
<p>다른 주제로 넘어 가기 전에 타이디하지 않은 데이터에 대해 간단히 이야기 해보자. 이 장의 앞부분에서 타이디하지 않은 데이터를 의미하기 위해 부정적인 용어인 ’지저분한’을 사용했다. 이는 과도하게 단순화한 것이다. 타이디 데이터가 아니더라도 유용하고 잘 구성된, 많은 데이터 구조가 있다. 다른 데이터 구조를 사용하는 데는 주된 이유가 두 가지이다.</p>
<ul>
<li><p>다른 표현 방식이 성능상, 저장용량상 장점이 클 수 있다.</p></li>
<li><p>전문 분야에서 독자적으로 진화시킨 데이터 저장 규칙이 타이디 데이터의 규칙과는 꽤 다를 수 있다.</p></li>
</ul>
<p>이런 이유로 인해 티블(또는 데이터프레임)이 아닌 다른 것이 필요해진다. 데이터가 관측값과 변수로 구성된 직사각형 구조에 자연스럽게 맞아떨어진다면 타이디 데이터가 기본 선택이어야 한다고 생각한다. 그러나 다른 구조를 사용하는 데도 그럴만한 충분한 이유가 있다. 타이디 데이터만이 유일한 방법은 아니다. 타이디하지 않은 데이터에 대해 더 자세히 알고 싶다면 제프 릭(Jeff Leek)의 깊이 있는 <a href="http://simplystatistics.org/2016/02/17/non-tidy-data">블로그 게시물</a> 을 적극 추천한다.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-import.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="relational-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/hadley/r4ds/edit/master/tidy.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
